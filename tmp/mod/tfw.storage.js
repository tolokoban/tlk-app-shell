{"intl":"var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n","src":"/** @module tfw.storage */require( 'tfw.storage', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n    function load(storage) {\r\n    return function(key, def) {\r\n        var v = storage.getItem(key);\r\n        if (v === null) {\r\n            return def;\r\n        }\r\n        try {\r\n            v = JSON.parse(v);\r\n        }\r\n        catch(ex) {}\r\n        return v;\r\n    };\r\n}\r\n\r\nfunction save(storage) {\r\n    return function(key, val) {\r\n        storage.setItem(key, JSON.stringify(val));\r\n    };\r\n}\r\n\r\n\r\nif( !window.localStorage ) {\r\n    window.localStorage = new DBStorage();\r\n    window.sessionStorage = new DBStorage();\r\n}\r\nelse if( !window.sessionStorage ) {\r\n    window.sessionStorage = window.localStorage;\r\n}\r\n\r\nexports.local = {\r\n    get: load(window.localStorage),\r\n    set: save(window.localStorage)\r\n};\r\n\r\nexports.session = {\r\n    get: load(window.sessionStorage),\r\n    set: save(window.sessionStorage)\r\n};\r\n\r\n\r\nfunction DBStorage() {\r\n    this._data = {};\r\n}\r\n\r\n\r\n/**\r\n * @member DBStorage.getItem\r\n * @param key\r\n */\r\nDBStorage.prototype.getItem = function(key, def) {\r\n    var val = this._data[key];\r\n    return typeof val === 'undefined' ? def : val;\r\n};\r\n\r\nDBStorage.prototype.setItem = function(key, val) {\r\n    this._data[key] = val;\r\n};\r\n\r\n\r\n  \r\nmodule.exports._ = _;\n/**\n * @module tfw.storage\n * @see module:$\n\n */\n});","zip":"require(\"tfw.storage\",function(t,n,o){function e(t){return function(n,o){var e=t.getItem(n);if(null===e)return o;try{e=JSON.parse(e)}catch(t){}return e}}function r(t){return function(n,o){t.setItem(n,JSON.stringify(o))}}function i(){this._data={}}var a=function(){function n(){return e(o,arguments)}var o={en:{}},e=t(\"$\").intl;return n.all=o,n}();window.localStorage?window.sessionStorage||(window.sessionStorage=window.localStorage):(window.localStorage=new i,window.sessionStorage=new i),o.local={get:e(window.localStorage),set:r(window.localStorage)},o.session={get:e(window.sessionStorage),set:r(window.sessionStorage)},i.prototype.getItem=function(t,n){var o=this._data[t];return\"undefined\"==typeof o?n:o},i.prototype.setItem=function(t,n){this._data[t]=n},n.exports._=a});\n//# sourceMappingURL=tfw.storage.js.map","map":{"version":3,"file":"tfw.storage.js","sources":["tfw.storage.js"],"sourcesContent":["/** @module tfw.storage */require( 'tfw.storage', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n    function load(storage) {\r\n    return function(key, def) {\r\n        var v = storage.getItem(key);\r\n        if (v === null) {\r\n            return def;\r\n        }\r\n        try {\r\n            v = JSON.parse(v);\r\n        }\r\n        catch(ex) {}\r\n        return v;\r\n    };\r\n}\r\n\r\nfunction save(storage) {\r\n    return function(key, val) {\r\n        storage.setItem(key, JSON.stringify(val));\r\n    };\r\n}\r\n\r\n\r\nif( !window.localStorage ) {\r\n    window.localStorage = new DBStorage();\r\n    window.sessionStorage = new DBStorage();\r\n}\r\nelse if( !window.sessionStorage ) {\r\n    window.sessionStorage = window.localStorage;\r\n}\r\n\r\nexports.local = {\r\n    get: load(window.localStorage),\r\n    set: save(window.localStorage)\r\n};\r\n\r\nexports.session = {\r\n    get: load(window.sessionStorage),\r\n    set: save(window.sessionStorage)\r\n};\r\n\r\n\r\nfunction DBStorage() {\r\n    this._data = {};\r\n}\r\n\r\n\r\n/**\r\n * @member DBStorage.getItem\r\n * @param key\r\n */\r\nDBStorage.prototype.getItem = function(key, def) {\r\n    var val = this._data[key];\r\n    return typeof val === 'undefined' ? def : val;\r\n};\r\n\r\nDBStorage.prototype.setItem = function(key, val) {\r\n    this._data[key] = val;\r\n};\r\n\r\n\r\n  \r\nmodule.exports._ = _;\n});"],"names":["require","module","exports","load","storage","key","def","v","getItem","JSON","parse","ex","save","val","setItem","stringify","DBStorage","this","_data","_","X","D","arguments","en","intl","all","window","localStorage","sessionStorage","local","get","set","session","prototype"],"mappings":"AAA0BA,QAAS,cAAe,SAASA,EAASC,EAAQC,GACxE,QAASC,GAAKC,GACd,MAAO,UAASC,EAAKC,GACjB,GAAIC,GAAIH,EAAQI,QAAQH,EACxB,IAAU,OAANE,EACA,MAAOD,EAEX,KACIC,EAAIE,KAAKC,MAAMH,GAEnB,MAAMI,IACN,MAAOJ,IAIf,QAASK,GAAKR,GACV,MAAO,UAASC,EAAKQ,GACjBT,EAAQU,QAAQT,EAAKI,KAAKM,UAAUF,KAwB5C,QAASG,KACLC,KAAKC,SA1C8E,GAAIC,GAAE,WAA+C,QAASA,KAAI,MAAOC,GAAEC,EAAEC,WAA5D,GAAID,IAAGE,OAASH,EAAEpB,EAAQ,KAAKwB,IAAiD,OAARL,GAAEM,IAAIJ,EAASF,IAsB1LO,QAAOC,aAIFD,OAAOE,iBACbF,OAAOE,eAAiBF,OAAOC,eAJ/BD,OAAOC,aAAe,GAAIX,GAC1BU,OAAOE,eAAiB,GAAIZ,IAMhCd,EAAQ2B,OACJC,IAAK3B,EAAKuB,OAAOC,cACjBI,IAAKnB,EAAKc,OAAOC,eAGrBzB,EAAQ8B,SACJF,IAAK3B,EAAKuB,OAAOE,gBACjBG,IAAKnB,EAAKc,OAAOE,iBAarBZ,EAAUiB,UAAUzB,QAAU,SAASH,EAAKC,GACxC,GAAIO,GAAMI,KAAKC,MAAMb,EACrB,OAAsB,mBAARQ,GAAsBP,EAAMO,GAG9CG,EAAUiB,UAAUnB,QAAU,SAAST,EAAKQ,GACxCI,KAAKC,MAAMb,GAAOQ,GAKtBZ,EAAOC,QAAQiB,EAAIA"},"dependencies":["mod/$"]}