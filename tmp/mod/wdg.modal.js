{"intl":"var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n","src":"/** @module wdg.modal */require( 'wdg.modal', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * @module wdg.modal\n *\n * @class\n * @param {boolean} scroll - Default true.\n *\n *\n * @example\n * var mod = require('wdg.modal');\n */\nvar $ = require( \"dom\" );\nvar DB = require( \"tfw.data-binding\" );\nvar Flex = require( \"wdg.flex\" );\nvar Button = require( \"wdg.button\" );\n\n\nfunction Modal( opts ) {\n  var that = this;\n\n  var body = $.div( 'theme-elevation-24', 'theme-color-bg-B3' );\n  var cell = $.div( [ body ] );\n  var elem = $.elem( this, 'div', 'wdg-modal', [ cell ] );\n\n  DB.prop( this, 'content' )( function ( v ) {\n    $.clear( body );\n    if ( Array.isArray( v ) ) {\n      v.forEach( function ( itm ) {\n        $.add( body, itm );\n      } );\n    } else if ( typeof v !== 'undefined' && v !== null ) {\n      $.add( body, v );\n    }\n  } );\n  DB.propString( this, 'width' )( function ( v ) {\n    $.css( body, {\n      'max-width': v\n    } );\n  } );\n  DB.propAddClass( this, 'padding' );\n  DB.propAddClass( this, 'scroll' );\n  DB.propAddClass( this, 'wide' );\n  DB.propBoolean( this, 'visible' )( function ( v ) {\n    if ( v ) {\n      that.attach();\n    } else {\n      that.detach();\n    }\n  } );\n\n  opts = DB.extend( {\n    visible: false,\n    content: [],\n    padding: true,\n    scroll: true,\n    wide: false,\n    width: 'auto'\n  }, opts, this );\n}\n\n\n/**\n * @member Modal.refresh\n * Refresh the content.\n */\nModal.prototype.refresh = function () {\n  DB.fire( this, 'content' );\n  return this;\n};\n\n/**\n * @member Modal.attach\n * Append element to body.\n */\nModal.prototype.attach = function () {\n  var that = this;\n\n  if ( this._timeoutDetach ) {\n    window.clearTimeout( this._timeoutDetach );\n    delete this._timeoutDetach;\n  }\n  document.body.appendChild( this.element );\n  DB.set( this, 'visible', true );\n  $.addClass( this, 'fadeout' );\n  window.setTimeout( function () {\n    $.removeClass( that, 'fadeout' );\n  } );\n};\n\n/**\n * @member Modal.detach\n * Remove element from body.\n */\nModal.prototype.detach = function () {\n  var that = this;\n\n  window.setTimeout( function () {\n    $.addClass( that, 'fadeout' );\n  } );\n  this._timeoutDetach = window.setTimeout( function () {\n    delete this._timeoutDetach;\n    DB.set( that, 'visible', false );\n    $.detach( that.element );\n  }, 250 );\n};\n\n/**\n * @function Modal.comfirm\n */\nModal.confirm = function ( content, onYes, onNo ) {\n  var btnNo = Button.No();\n  var btnYes = Button.Yes( 'warning' );\n  var buttons = $.div( [ $.tag( 'hr' ), new Flex( {\n    content: [ btnNo, btnYes ]\n  } ) ] );\n  if ( typeof content === 'string' && content.substr( 0, 6 ) == '<html>' ) {\n    // This is HTML code.\n    var html = content.substr( 6 );\n    content = $.div();\n    content.innerHTML = html;\n  }\n  var modal = new Modal( {\n    content: $.div( [ content, buttons ] ),\n    padding: true\n  } );\n  modal.attach();\n\n  btnNo.on( function () {\n    modal.detach();\n    if ( typeof onNo === 'function' ) {\n      onNo();\n    }\n  } );\n  btnYes.on( function () {\n    if ( typeof onYes === 'function' ) {\n      var caption = onYes();\n      if ( typeof caption !== 'string' ) modal.detach();\n      else {\n        btnNo.visible = false;\n        btnYes.waitOn( caption );\n      }\n    } else {\n      modal.detach();\n    }\n  } );\n  return modal;\n};\n\n/**\n * Display a message with an OK button.\n */\nModal.alert = function ( content, onOK ) {\n  var btnOK = Button.Close( 'simple' );\n  var buttons = $.div( [ $.tag( 'hr' ), new Flex( {\n    content: [ btnOK ]\n  } ) ] );\n  if ( typeof content === 'string' && content.substr( 0, 6 ) == '<html>' ) {\n    // This is HTML code.\n    var html = content.substr( 6 );\n    content = $.div();\n    content.innerHTML = html;\n  }\n  var modal = new Modal( {\n    scroll: false,\n    content: $.div( [\n        $.div( 'scrollable', [ content ] ), buttons\n    ] ),\n    padding: true\n  } );\n  modal.attach();\n\n  btnOK.on( function () {\n    modal.detach();\n    if ( typeof onOK === 'function' ) onOK();\n  } );\n  return modal;\n};\n\n\nmodule.exports = Modal;\n\n  \nmodule.exports._ = _;\n/**\n * @module wdg.modal\n * @see module:$\n * @see module:dom\n * @see module:tfw.data-binding\n * @see module:wdg.flex\n * @see module:wdg.button\n\n */\n});","zip":"require(\"wdg.modal\",function(t,e,i){function n(t){var e=this,i=a.div(\"theme-elevation-24\",\"theme-color-bg-B3\"),n=a.div([i]);a.elem(this,\"div\",\"wdg-modal\",[n]);d.prop(this,\"content\")(function(t){a.clear(i),Array.isArray(t)?t.forEach(function(t){a.add(i,t)}):void 0!==t&&null!==t&&a.add(i,t)}),d.propString(this,\"width\")(function(t){a.css(i,{\"max-width\":t})}),d.propAddClass(this,\"padding\"),d.propAddClass(this,\"scroll\"),d.propAddClass(this,\"wide\"),d.propBoolean(this,\"visible\")(function(t){t?e.attach():e.detach()}),t=d.extend({visible:!1,content:[],padding:!0,scroll:!0,wide:!1,width:\"auto\"},t,this)}var o=function(){function e(){return n(i,arguments)}var i={en:{}},n=t(\"$\").intl;return e.all=i,e}(),a=t(\"dom\"),d=t(\"tfw.data-binding\"),s=t(\"wdg.flex\"),r=t(\"wdg.button\");n.prototype.refresh=function(){return d.fire(this,\"content\"),this},n.prototype.attach=function(){var t=this;this._timeoutDetach&&(window.clearTimeout(this._timeoutDetach),delete this._timeoutDetach),document.body.appendChild(this.element),d.set(this,\"visible\",!0),a.addClass(this,\"fadeout\"),window.setTimeout(function(){a.removeClass(t,\"fadeout\")})},n.prototype.detach=function(){var t=this;window.setTimeout(function(){a.addClass(t,\"fadeout\")}),this._timeoutDetach=window.setTimeout(function(){delete this._timeoutDetach,d.set(t,\"visible\",!1),a.detach(t.element)},250)},n.confirm=function(t,e,i){var o=r.No(),d=r.Yes(\"warning\"),c=a.div([a.tag(\"hr\"),new s({content:[o,d]})]);if(\"string\"==typeof t&&\"<html>\"==t.substr(0,6)){var h=t.substr(6);t=a.div(),t.innerHTML=h}var u=new n({content:a.div([t,c]),padding:!0});return u.attach(),o.on(function(){u.detach(),\"function\"==typeof i&&i()}),d.on(function(){if(\"function\"==typeof e){var t=e();\"string\"!=typeof t?u.detach():(o.visible=!1,d.waitOn(t))}else u.detach()}),u},n.alert=function(t,e){var i=r.Close(\"simple\"),o=a.div([a.tag(\"hr\"),new s({content:[i]})]);if(\"string\"==typeof t&&\"<html>\"==t.substr(0,6)){var d=t.substr(6);t=a.div(),t.innerHTML=d}var c=new n({scroll:!1,content:a.div([a.div(\"scrollable\",[t]),o]),padding:!0});return c.attach(),i.on(function(){c.detach(),\"function\"==typeof e&&e()}),c},e.exports=n,e.exports._=o});\n//# sourceMappingURL=wdg.modal.js.map","map":{"version":3,"file":"wdg.modal.js","sources":["wdg.modal.js"],"sourcesContent":["/** @module wdg.modal */require( 'wdg.modal', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * @module wdg.modal\n *\n * @class\n * @param {boolean} scroll - Default true.\n *\n *\n * @example\n * var mod = require('wdg.modal');\n */\nvar $ = require( \"dom\" );\nvar DB = require( \"tfw.data-binding\" );\nvar Flex = require( \"wdg.flex\" );\nvar Button = require( \"wdg.button\" );\n\n\nfunction Modal( opts ) {\n  var that = this;\n\n  var body = $.div( 'theme-elevation-24', 'theme-color-bg-B3' );\n  var cell = $.div( [ body ] );\n  var elem = $.elem( this, 'div', 'wdg-modal', [ cell ] );\n\n  DB.prop( this, 'content' )( function ( v ) {\n    $.clear( body );\n    if ( Array.isArray( v ) ) {\n      v.forEach( function ( itm ) {\n        $.add( body, itm );\n      } );\n    } else if ( typeof v !== 'undefined' && v !== null ) {\n      $.add( body, v );\n    }\n  } );\n  DB.propString( this, 'width' )( function ( v ) {\n    $.css( body, {\n      'max-width': v\n    } );\n  } );\n  DB.propAddClass( this, 'padding' );\n  DB.propAddClass( this, 'scroll' );\n  DB.propAddClass( this, 'wide' );\n  DB.propBoolean( this, 'visible' )( function ( v ) {\n    if ( v ) {\n      that.attach();\n    } else {\n      that.detach();\n    }\n  } );\n\n  opts = DB.extend( {\n    visible: false,\n    content: [],\n    padding: true,\n    scroll: true,\n    wide: false,\n    width: 'auto'\n  }, opts, this );\n}\n\n\n/**\n * @member Modal.refresh\n * Refresh the content.\n */\nModal.prototype.refresh = function () {\n  DB.fire( this, 'content' );\n  return this;\n};\n\n/**\n * @member Modal.attach\n * Append element to body.\n */\nModal.prototype.attach = function () {\n  var that = this;\n\n  if ( this._timeoutDetach ) {\n    window.clearTimeout( this._timeoutDetach );\n    delete this._timeoutDetach;\n  }\n  document.body.appendChild( this.element );\n  DB.set( this, 'visible', true );\n  $.addClass( this, 'fadeout' );\n  window.setTimeout( function () {\n    $.removeClass( that, 'fadeout' );\n  } );\n};\n\n/**\n * @member Modal.detach\n * Remove element from body.\n */\nModal.prototype.detach = function () {\n  var that = this;\n\n  window.setTimeout( function () {\n    $.addClass( that, 'fadeout' );\n  } );\n  this._timeoutDetach = window.setTimeout( function () {\n    delete this._timeoutDetach;\n    DB.set( that, 'visible', false );\n    $.detach( that.element );\n  }, 250 );\n};\n\n/**\n * @function Modal.comfirm\n */\nModal.confirm = function ( content, onYes, onNo ) {\n  var btnNo = Button.No();\n  var btnYes = Button.Yes( 'warning' );\n  var buttons = $.div( [ $.tag( 'hr' ), new Flex( {\n    content: [ btnNo, btnYes ]\n  } ) ] );\n  if ( typeof content === 'string' && content.substr( 0, 6 ) == '<html>' ) {\n    // This is HTML code.\n    var html = content.substr( 6 );\n    content = $.div();\n    content.innerHTML = html;\n  }\n  var modal = new Modal( {\n    content: $.div( [ content, buttons ] ),\n    padding: true\n  } );\n  modal.attach();\n\n  btnNo.on( function () {\n    modal.detach();\n    if ( typeof onNo === 'function' ) {\n      onNo();\n    }\n  } );\n  btnYes.on( function () {\n    if ( typeof onYes === 'function' ) {\n      var caption = onYes();\n      if ( typeof caption !== 'string' ) modal.detach();\n      else {\n        btnNo.visible = false;\n        btnYes.waitOn( caption );\n      }\n    } else {\n      modal.detach();\n    }\n  } );\n  return modal;\n};\n\n/**\n * Display a message with an OK button.\n */\nModal.alert = function ( content, onOK ) {\n  var btnOK = Button.Close( 'simple' );\n  var buttons = $.div( [ $.tag( 'hr' ), new Flex( {\n    content: [ btnOK ]\n  } ) ] );\n  if ( typeof content === 'string' && content.substr( 0, 6 ) == '<html>' ) {\n    // This is HTML code.\n    var html = content.substr( 6 );\n    content = $.div();\n    content.innerHTML = html;\n  }\n  var modal = new Modal( {\n    scroll: false,\n    content: $.div( [\n        $.div( 'scrollable', [ content ] ), buttons\n    ] ),\n    padding: true\n  } );\n  modal.attach();\n\n  btnOK.on( function () {\n    modal.detach();\n    if ( typeof onOK === 'function' ) onOK();\n  } );\n  return modal;\n};\n\n\nmodule.exports = Modal;\n\n  \nmodule.exports._ = _;\n});"],"names":["require","module","exports","Modal","opts","that","this","body","$","div","cell","elem","DB","prop","v","clear","Array","isArray","forEach","itm","add","propString","css","max-width","propAddClass","propBoolean","attach","detach","extend","visible","content","padding","scroll","wide","width","_","X","D","arguments","en","intl","all","Flex","Button","prototype","refresh","fire","_timeoutDetach","window","clearTimeout","document","appendChild","element","set","addClass","setTimeout","removeClass","confirm","onYes","onNo","btnNo","No","btnYes","Yes","buttons","tag","substr","html","innerHTML","modal","on","caption","waitOn","alert","onOK","btnOK","Close"],"mappings":"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"},"dependencies":["mod/$","mod/dom","mod/tfw.data-binding","mod/wdg.flex","mod/wdg.button"]}