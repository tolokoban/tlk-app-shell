{"intl":"var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n","src":"/** @module tfw.touchable */require( 'tfw.touchable', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n    \"use strict\";\r\n\r\n/**\r\n * @module tfw.touchable\r\n *\r\n * @description\r\n * Turn  a DOM  element  into  a touchable  one  with material  design\r\n * animation: a growing transparent disk.\r\n *\r\n * @example\r\n * var Touchable = require('tfw.touchable');\r\n * var div = document.querySelector('#button');\r\n * var touchable = new Touchable( div, {\r\n *   opacity: .2,\r\n *   color: \"white\"\r\n * });\r\n * touchable.tap.add(function() { ... });\r\n * touchable.press.add(function() { ... });\r\n */\r\n\r\nvar $ = require(\"dom\");\r\nvar Fx = require(\"dom.fx\");\r\nvar Listeners = require(\"tfw.listeners\");\r\n\r\nvar Touchable = function(elem, opts) {\r\n    var that = this;\r\n\r\n    if( typeof opts === 'undefined' ) opts = {};\r\n    if( typeof opts.enabled === 'undefined' ) opts.enabled = true;\r\n    elem = $( elem );\r\n    this.enabled = opts.enabled;\r\n    this.color = opts.color || \"#fd8\";\r\n    this.classToAdd = opts.classToAdd;\r\n    this.opacity = opts.opacity || .4;\r\n    this.element = $(elem);\r\n    this.tap = new Listeners();\r\n    this.press = new Listeners();\r\n\r\n    $.addClass( elem, 'tfw-touchable' );\r\n    var shadow = $.div( 'tfw-touchable-shadow' );\r\n    var fxDown = Fx().css( shadow, { transition: \"none\" })\r\n            .exec(function( session ) {\r\n                var cls = that.classToAdd;\r\n                if( typeof cls === 'string' ) {\r\n                    $.addClass( elem, cls );\r\n                }\r\n                // Position must not be `static`.\r\n                var position = getComputedStyle(elem).position;\r\n                if( ['relative', 'absolute', 'fixed'].indexOf( position ) == -1 ) {\r\n                    elem.style.position = 'relative';\r\n                }\r\n                elem.style.overflow = 'hidden';\r\n                var rect = elem.getBoundingClientRect();\r\n                var w = rect.width;\r\n                var h = rect.height;\r\n                w = Math.max( lastX, w - lastX );\r\n                h = Math.max( lastY, h - lastY );\r\n                var radius = Math.ceil( Math.sqrt( w*w + h*h ) );\r\n                $.css( shadow, {\r\n                    left: lastX + \"px\",\r\n                    top: lastY + \"px\",\r\n                    margin: \"-\" + radius + \"px\",\r\n                    width: 2*radius + \"px\",\r\n                    height: 2*radius + \"px\",\r\n                    opacity: that.opacity,\r\n                    background: that.color,\r\n                    transform: \"scale(0)\"\r\n                });\r\n                $.add( elem, shadow );\r\n            })\r\n            .css( shadow, { transition: \"all .3s ease\" } )\r\n            .css( shadow, { transform: \"scale(1)\" } )\r\n            .wait( 300 )\r\n            .css( shadow, { transition: \"all .2s ease\" } )\r\n            .css( shadow, { opacity: 0 } )\r\n            .wait( 200 )\r\n            .detach( shadow );\r\n    var time = 0;\r\n    var lastX, lastY;\r\n    var removeShadow = 0;\r\n\r\n    $.on(elem, {\r\n        down: function(evt) {\r\n            if( !that.enabled ) return;\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            lastX = Math.floor( evt.x );\r\n            lastY = Math.floor( evt.y );\r\n            fxDown.start();\r\n            time = Date.now();\r\n        },\r\n        tap: function(evt) {\r\n            if( !that.enabled ) return;\r\n            console.log('TAP', evt);\r\n            that.tap.fire( evt );\r\n        }\r\n    });\r\n};\r\n\r\n\r\nmodule.exports = Touchable;\r\n\r\n\r\n\r\n/*\r\n https://jsfiddle.net/mzmaczdn/7/\r\n\r\n\r\n var div = document.createElement('div');\r\n div.className = 'shadow';\r\n\r\n var btn = document.querySelector('button');\r\n btn.addEventListener('mousedown', function(evt) {\r\n btn.className = \"press\";\r\n btn.appendChild( div );\r\n div.style.left = evt.offsetX + \"px\";\r\n div.style.top = evt.offsetY + \"px\";\r\n window.setTimeout(function() {\r\n div.style.transform = \"scale(1)\";\r\n });\r\n });\r\n\r\n btn.addEventListener('mouseup', function(evt) {\r\n div.style.transform = \"scale(0)\";\r\n btn.removeChild(div);\r\n });\r\n */\r\n\r\n\r\n  \r\nmodule.exports._ = _;\n/**\n * @module tfw.touchable\n * @see module:$\n * @see module:dom\n * @see module:dom.fx\n * @see module:tfw.listeners\n\n */\n});","zip":"require(\"tfw.touchable\",function(t,e,a){var o=function(){function e(){return o(a,arguments)}var a={en:{},fr:{}},o=t(\"$\").intl;return e.all=a,e}(),n=t(\"dom\"),s=t(\"dom.fx\"),i=t(\"tfw.listeners\"),l=function(t,e){var a=this;\"undefined\"==typeof e&&(e={}),\"undefined\"==typeof e.enabled&&(e.enabled=!0),t=n(t),this.enabled=e.enabled,this.color=e.color||\"#fd8\",this.classToAdd=e.classToAdd,this.opacity=e.opacity||.4,this.element=n(t),this.tap=new i,this.press=new i,n.addClass(t,\"tfw-touchable\");var o,l,r=n.div(\"tfw-touchable-shadow\"),d=s().css(r,{transition:\"none\"}).exec(function(e){var s=a.classToAdd;\"string\"==typeof s&&n.addClass(t,s);var i=getComputedStyle(t).position;[\"relative\",\"absolute\",\"fixed\"].indexOf(i)==-1&&(t.style.position=\"relative\"),t.style.overflow=\"hidden\";var d=t.getBoundingClientRect(),c=d.width,f=d.height;c=Math.max(o,c-o),f=Math.max(l,f-l);var h=Math.ceil(Math.sqrt(c*c+f*f));n.css(r,{left:o+\"px\",top:l+\"px\",margin:\"-\"+h+\"px\",width:2*h+\"px\",height:2*h+\"px\",opacity:a.opacity,background:a.color,transform:\"scale(0)\"}),n.add(t,r)}).css(r,{transition:\"all .3s ease\"}).css(r,{transform:\"scale(1)\"}).wait(300).css(r,{transition:\"all .2s ease\"}).css(r,{opacity:0}).wait(200).detach(r),c=0;n.on(t,{down:function(t){a.enabled&&(t.stopPropagation(),t.preventDefault(),o=Math.floor(t.x),l=Math.floor(t.y),d.start(),c=Date.now())},tap:function(t){a.enabled&&(console.log(\"TAP\",t),a.tap.fire(t))}})};e.exports=l,e.exports._=o});\n//# sourceMappingURL=tfw.touchable.js.map","map":{"version":3,"file":"tfw.touchable.js","sources":["tfw.touchable.js"],"sourcesContent":["/** @module tfw.touchable */require( 'tfw.touchable', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n    \"use strict\";\r\n\r\n/**\r\n * @module tfw.touchable\r\n *\r\n * @description\r\n * Turn  a DOM  element  into  a touchable  one  with material  design\r\n * animation: a growing transparent disk.\r\n *\r\n * @example\r\n * var Touchable = require('tfw.touchable');\r\n * var div = document.querySelector('#button');\r\n * var touchable = new Touchable( div, {\r\n *   opacity: .2,\r\n *   color: \"white\"\r\n * });\r\n * touchable.tap.add(function() { ... });\r\n * touchable.press.add(function() { ... });\r\n */\r\n\r\nvar $ = require(\"dom\");\r\nvar Fx = require(\"dom.fx\");\r\nvar Listeners = require(\"tfw.listeners\");\r\n\r\nvar Touchable = function(elem, opts) {\r\n    var that = this;\r\n\r\n    if( typeof opts === 'undefined' ) opts = {};\r\n    if( typeof opts.enabled === 'undefined' ) opts.enabled = true;\r\n    elem = $( elem );\r\n    this.enabled = opts.enabled;\r\n    this.color = opts.color || \"#fd8\";\r\n    this.classToAdd = opts.classToAdd;\r\n    this.opacity = opts.opacity || .4;\r\n    this.element = $(elem);\r\n    this.tap = new Listeners();\r\n    this.press = new Listeners();\r\n\r\n    $.addClass( elem, 'tfw-touchable' );\r\n    var shadow = $.div( 'tfw-touchable-shadow' );\r\n    var fxDown = Fx().css( shadow, { transition: \"none\" })\r\n            .exec(function( session ) {\r\n                var cls = that.classToAdd;\r\n                if( typeof cls === 'string' ) {\r\n                    $.addClass( elem, cls );\r\n                }\r\n                // Position must not be `static`.\r\n                var position = getComputedStyle(elem).position;\r\n                if( ['relative', 'absolute', 'fixed'].indexOf( position ) == -1 ) {\r\n                    elem.style.position = 'relative';\r\n                }\r\n                elem.style.overflow = 'hidden';\r\n                var rect = elem.getBoundingClientRect();\r\n                var w = rect.width;\r\n                var h = rect.height;\r\n                w = Math.max( lastX, w - lastX );\r\n                h = Math.max( lastY, h - lastY );\r\n                var radius = Math.ceil( Math.sqrt( w*w + h*h ) );\r\n                $.css( shadow, {\r\n                    left: lastX + \"px\",\r\n                    top: lastY + \"px\",\r\n                    margin: \"-\" + radius + \"px\",\r\n                    width: 2*radius + \"px\",\r\n                    height: 2*radius + \"px\",\r\n                    opacity: that.opacity,\r\n                    background: that.color,\r\n                    transform: \"scale(0)\"\r\n                });\r\n                $.add( elem, shadow );\r\n            })\r\n            .css( shadow, { transition: \"all .3s ease\" } )\r\n            .css( shadow, { transform: \"scale(1)\" } )\r\n            .wait( 300 )\r\n            .css( shadow, { transition: \"all .2s ease\" } )\r\n            .css( shadow, { opacity: 0 } )\r\n            .wait( 200 )\r\n            .detach( shadow );\r\n    var time = 0;\r\n    var lastX, lastY;\r\n    var removeShadow = 0;\r\n\r\n    $.on(elem, {\r\n        down: function(evt) {\r\n            if( !that.enabled ) return;\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            lastX = Math.floor( evt.x );\r\n            lastY = Math.floor( evt.y );\r\n            fxDown.start();\r\n            time = Date.now();\r\n        },\r\n        tap: function(evt) {\r\n            if( !that.enabled ) return;\r\n            console.log('TAP', evt);\r\n            that.tap.fire( evt );\r\n        }\r\n    });\r\n};\r\n\r\n\r\nmodule.exports = Touchable;\r\n\r\n\r\n\r\n/*\r\n https://jsfiddle.net/mzmaczdn/7/\r\n\r\n\r\n var div = document.createElement('div');\r\n div.className = 'shadow';\r\n\r\n var btn = document.querySelector('button');\r\n btn.addEventListener('mousedown', function(evt) {\r\n btn.className = \"press\";\r\n btn.appendChild( div );\r\n div.style.left = evt.offsetX + \"px\";\r\n div.style.top = evt.offsetY + \"px\";\r\n window.setTimeout(function() {\r\n div.style.transform = \"scale(1)\";\r\n });\r\n });\r\n\r\n btn.addEventListener('mouseup', function(evt) {\r\n div.style.transform = \"scale(0)\";\r\n btn.removeChild(div);\r\n });\r\n */\r\n\r\n\r\n  \r\nmodule.exports._ = _;\n});"],"names":["require","module","exports","_","X","D","arguments","en","fr","intl","all","$","Fx","Listeners","Touchable","elem","opts","that","this","enabled","color","classToAdd","opacity","element","tap","press","addClass","lastX","lastY","shadow","div","fxDown","css","transition","exec","session","cls","position","getComputedStyle","indexOf","style","overflow","rect","getBoundingClientRect","w","width","h","height","Math","max","radius","ceil","sqrt","left","top","margin","background","transform","add","wait","detach","time","on","down","evt","stopPropagation","preventDefault","floor","x","y","start","Date","now","console","log","fire"],"mappings":"AAA4BA,QAAS,gBAAiB,SAASA,EAASC,EAAQC,GAAW,GAAIC,GAAE,WAAuD,QAASA,KAAI,MAAOC,GAAEC,EAAEC,WAApE,GAAID,IAAGE,MAAQC,OAASJ,EAAEJ,EAAQ,KAAKS,IAAiD,OAARN,GAAEO,IAAIL,EAASF,KAqBvMQ,EAAIX,EAAQ,OACZY,EAAKZ,EAAQ,UACba,EAAYb,EAAQ,iBAEpBc,EAAY,SAASC,EAAMC,GAC3B,GAAIC,GAAOC,IAES,oBAATF,KAAuBA,MACN,mBAAjBA,GAAKG,UAA0BH,EAAKG,SAAU,GACzDJ,EAAOJ,EAAGI,GACVG,KAAKC,QAAUH,EAAKG,QACpBD,KAAKE,MAAQJ,EAAKI,OAAS,OAC3BF,KAAKG,WAAaL,EAAKK,WACvBH,KAAKI,QAAUN,EAAKM,SAAW,GAC/BJ,KAAKK,QAAUZ,EAAEI,GACjBG,KAAKM,IAAM,GAAIX,GACfK,KAAKO,MAAQ,GAAIZ,GAEjBF,EAAEe,SAAUX,EAAM,gBAClB,IAuCIY,GAAOC,EAvCPC,EAASlB,EAAEmB,IAAK,wBAChBC,EAASnB,IAAKoB,IAAKH,GAAUI,WAAY,SACpCC,KAAK,SAAUC,GACZ,GAAIC,GAAMnB,EAAKI,UACI,iBAARe,IACPzB,EAAEe,SAAUX,EAAMqB,EAGtB,IAAIC,GAAWC,iBAAiBvB,GAAMsB,UACjC,WAAY,WAAY,SAASE,QAASF,KAAc,IACzDtB,EAAKyB,MAAMH,SAAW,YAE1BtB,EAAKyB,MAAMC,SAAW,QACtB,IAAIC,GAAO3B,EAAK4B,wBACZC,EAAIF,EAAKG,MACTC,EAAIJ,EAAKK,MACbH,GAAII,KAAKC,IAAKtB,EAAOiB,EAAIjB,GACzBmB,EAAIE,KAAKC,IAAKrB,EAAOkB,EAAIlB,EACzB,IAAIsB,GAASF,KAAKG,KAAMH,KAAKI,KAAMR,EAAEA,EAAIE,EAAEA,GAC3CnC,GAAEqB,IAAKH,GACHwB,KAAM1B,EAAQ,KACd2B,IAAK1B,EAAQ,KACb2B,OAAQ,IAAML,EAAS,KACvBL,MAAO,EAAEK,EAAS,KAClBH,OAAQ,EAAEG,EAAS,KACnB5B,QAASL,EAAKK,QACdkC,WAAYvC,EAAKG,MACjBqC,UAAW,aAEf9C,EAAE+C,IAAK3C,EAAMc,KAEhBG,IAAKH,GAAUI,WAAY,iBAC3BD,IAAKH,GAAU4B,UAAW,aAC1BE,KAAM,KACN3B,IAAKH,GAAUI,WAAY,iBAC3BD,IAAKH,GAAUP,QAAS,IACxBqC,KAAM,KACNC,OAAQ/B,GACbgC,EAAO,CAIXlD,GAAEmD,GAAG/C,GACDgD,KAAM,SAASC,GACN/C,EAAKE,UACV6C,EAAIC,kBACJD,EAAIE,iBACJvC,EAAQqB,KAAKmB,MAAOH,EAAII,GACxBxC,EAAQoB,KAAKmB,MAAOH,EAAIK,GACxBtC,EAAOuC,QACPT,EAAOU,KAAKC,QAEhBhD,IAAK,SAASwC,GACL/C,EAAKE,UACVsD,QAAQC,IAAI,MAAOV,GACnB/C,EAAKO,IAAImD,KAAMX,OAM3B/D,GAAOC,QAAUY,EA8BjBb,EAAOC,QAAQC,EAAIA"},"dependencies":["mod/$","mod/dom","mod/dom.fx","mod/tfw.listeners"]}