{"intl":"var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n","src":"/** @module tfw.touchable */require( 'tfw.touchable', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    \"use strict\";\n\n/**\n * @module tfw.touchable\n *\n * @description\n * Turn  a DOM  element  into  a touchable  one  with material  design\n * animation: a growing transparent disk.\n *\n * @example\n * var Touchable = require('tfw.touchable');\n * var div = document.querySelector('#button');\n * var touchable = new Touchable( div, {\n *   opacity: .2,\n *   color: \"white\"\n * });\n * touchable.tap.add(function() { ... });\n * touchable.press.add(function() { ... });\n */\n\nvar $ = require(\"dom\");\nvar Fx = require(\"dom.fx\");\nvar Listeners = require(\"tfw.listeners\");\n\nvar Touchable = function(elem, opts) {\n    var that = this;\n\n    if( typeof opts === 'undefined' ) opts = {};\n    if( typeof opts.enabled === 'undefined' ) opts.enabled = true;\n    elem = $( elem );\n    this.enabled = opts.enabled;\n    this.color = opts.color || \"#fd8\";\n    this.classToAdd = opts.classToAdd;\n    this.opacity = opts.opacity || .4;\n    this.element = $(elem);\n    this.tap = new Listeners();\n    this.press = new Listeners();\n\n    $.addClass( elem, 'tfw-touchable' );\n    var shadow = $.div( 'tfw-touchable-shadow' );\n    var fxDown = Fx().css( shadow, { transition: \"none\" })\n            .exec(function( session ) {\n                var cls = that.classToAdd;\n                if( typeof cls === 'string' ) {\n                    $.addClass( elem, cls );\n                }\n                // Position must not be `static`.\n                var position = getComputedStyle(elem).position;\n                if( ['relative', 'absolute', 'fixed'].indexOf( position ) == -1 ) {\n                    elem.style.position = 'relative';\n                }\n                elem.style.overflow = 'hidden';\n                var rect = elem.getBoundingClientRect();\n                var w = rect.width;\n                var h = rect.height;\n                w = Math.max( lastX, w - lastX );\n                h = Math.max( lastY, h - lastY );\n                var radius = Math.ceil( Math.sqrt( w*w + h*h ) );\n                $.css( shadow, {\n                    left: lastX + \"px\",\n                    top: lastY + \"px\",\n                    margin: \"-\" + radius + \"px\",\n                    width: 2*radius + \"px\",\n                    height: 2*radius + \"px\",\n                    opacity: that.opacity,\n                    background: that.color,\n                    transform: \"scale(0)\"\n                });\n                $.add( elem, shadow );\n            })\n            .css( shadow, { transition: \"all .3s ease\" } )\n            .css( shadow, { transform: \"scale(1)\" } )\n            .wait( 300 )\n            .css( shadow, { transition: \"all .2s ease\" } )\n            .css( shadow, { opacity: 0 } )\n            .wait( 200 )\n            .detach( shadow );\n    var time = 0;\n    var lastX, lastY;\n    var removeShadow = 0;\n\n    $.on(elem, {\n        down: function(evt) {\n            if( !that.enabled ) return;\n            evt.stopPropagation();\n            evt.preventDefault();\n            lastX = Math.floor( evt.x );\n            lastY = Math.floor( evt.y );\n            fxDown.start();\n            time = Date.now();\n        },\n        tap: function(evt) {\n            if( !that.enabled ) return;\n            console.log('TAP', evt);\n            that.tap.fire( evt );\n        }\n    });\n};\n\n\nmodule.exports = Touchable;\n\n\n\n/*\n https://jsfiddle.net/mzmaczdn/7/\n\n\n var div = document.createElement('div');\n div.className = 'shadow';\n\n var btn = document.querySelector('button');\n btn.addEventListener('mousedown', function(evt) {\n btn.className = \"press\";\n btn.appendChild( div );\n div.style.left = evt.offsetX + \"px\";\n div.style.top = evt.offsetY + \"px\";\n window.setTimeout(function() {\n div.style.transform = \"scale(1)\";\n });\n });\n\n btn.addEventListener('mouseup', function(evt) {\n div.style.transform = \"scale(0)\";\n btn.removeChild(div);\n });\n */\n\n\n  \nmodule.exports._ = _;\n/**\n * @module tfw.touchable\n * @see module:$\n * @see module:dom\n * @see module:dom.fx\n * @see module:tfw.listeners\n\n */\n});","zip":"require(\"tfw.touchable\",function(t,e,a){var o=function(){function e(){return o(a,arguments)}var a={en:{},fr:{}},o=t(\"$\").intl;return e.all=a,e}(),n=t(\"dom\"),s=t(\"dom.fx\"),i=t(\"tfw.listeners\"),l=function(t,e){var a=this;\"undefined\"==typeof e&&(e={}),\"undefined\"==typeof e.enabled&&(e.enabled=!0),t=n(t),this.enabled=e.enabled,this.color=e.color||\"#fd8\",this.classToAdd=e.classToAdd,this.opacity=e.opacity||.4,this.element=n(t),this.tap=new i,this.press=new i,n.addClass(t,\"tfw-touchable\");var o,l,r=n.div(\"tfw-touchable-shadow\"),d=s().css(r,{transition:\"none\"}).exec(function(e){var s=a.classToAdd;\"string\"==typeof s&&n.addClass(t,s);var i=getComputedStyle(t).position;[\"relative\",\"absolute\",\"fixed\"].indexOf(i)==-1&&(t.style.position=\"relative\"),t.style.overflow=\"hidden\";var d=t.getBoundingClientRect(),c=d.width,f=d.height;c=Math.max(o,c-o),f=Math.max(l,f-l);var h=Math.ceil(Math.sqrt(c*c+f*f));n.css(r,{left:o+\"px\",top:l+\"px\",margin:\"-\"+h+\"px\",width:2*h+\"px\",height:2*h+\"px\",opacity:a.opacity,background:a.color,transform:\"scale(0)\"}),n.add(t,r)}).css(r,{transition:\"all .3s ease\"}).css(r,{transform:\"scale(1)\"}).wait(300).css(r,{transition:\"all .2s ease\"}).css(r,{opacity:0}).wait(200).detach(r),c=0;n.on(t,{down:function(t){a.enabled&&(t.stopPropagation(),t.preventDefault(),o=Math.floor(t.x),l=Math.floor(t.y),d.start(),c=Date.now())},tap:function(t){a.enabled&&(console.log(\"TAP\",t),a.tap.fire(t))}})};e.exports=l,e.exports._=o});\n//# sourceMappingURL=tfw.touchable.js.map","map":{"version":3,"file":"tfw.touchable.js","sources":["tfw.touchable.js"],"sourcesContent":["/** @module tfw.touchable */require( 'tfw.touchable', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    \"use strict\";\n\n/**\n * @module tfw.touchable\n *\n * @description\n * Turn  a DOM  element  into  a touchable  one  with material  design\n * animation: a growing transparent disk.\n *\n * @example\n * var Touchable = require('tfw.touchable');\n * var div = document.querySelector('#button');\n * var touchable = new Touchable( div, {\n *   opacity: .2,\n *   color: \"white\"\n * });\n * touchable.tap.add(function() { ... });\n * touchable.press.add(function() { ... });\n */\n\nvar $ = require(\"dom\");\nvar Fx = require(\"dom.fx\");\nvar Listeners = require(\"tfw.listeners\");\n\nvar Touchable = function(elem, opts) {\n    var that = this;\n\n    if( typeof opts === 'undefined' ) opts = {};\n    if( typeof opts.enabled === 'undefined' ) opts.enabled = true;\n    elem = $( elem );\n    this.enabled = opts.enabled;\n    this.color = opts.color || \"#fd8\";\n    this.classToAdd = opts.classToAdd;\n    this.opacity = opts.opacity || .4;\n    this.element = $(elem);\n    this.tap = new Listeners();\n    this.press = new Listeners();\n\n    $.addClass( elem, 'tfw-touchable' );\n    var shadow = $.div( 'tfw-touchable-shadow' );\n    var fxDown = Fx().css( shadow, { transition: \"none\" })\n            .exec(function( session ) {\n                var cls = that.classToAdd;\n                if( typeof cls === 'string' ) {\n                    $.addClass( elem, cls );\n                }\n                // Position must not be `static`.\n                var position = getComputedStyle(elem).position;\n                if( ['relative', 'absolute', 'fixed'].indexOf( position ) == -1 ) {\n                    elem.style.position = 'relative';\n                }\n                elem.style.overflow = 'hidden';\n                var rect = elem.getBoundingClientRect();\n                var w = rect.width;\n                var h = rect.height;\n                w = Math.max( lastX, w - lastX );\n                h = Math.max( lastY, h - lastY );\n                var radius = Math.ceil( Math.sqrt( w*w + h*h ) );\n                $.css( shadow, {\n                    left: lastX + \"px\",\n                    top: lastY + \"px\",\n                    margin: \"-\" + radius + \"px\",\n                    width: 2*radius + \"px\",\n                    height: 2*radius + \"px\",\n                    opacity: that.opacity,\n                    background: that.color,\n                    transform: \"scale(0)\"\n                });\n                $.add( elem, shadow );\n            })\n            .css( shadow, { transition: \"all .3s ease\" } )\n            .css( shadow, { transform: \"scale(1)\" } )\n            .wait( 300 )\n            .css( shadow, { transition: \"all .2s ease\" } )\n            .css( shadow, { opacity: 0 } )\n            .wait( 200 )\n            .detach( shadow );\n    var time = 0;\n    var lastX, lastY;\n    var removeShadow = 0;\n\n    $.on(elem, {\n        down: function(evt) {\n            if( !that.enabled ) return;\n            evt.stopPropagation();\n            evt.preventDefault();\n            lastX = Math.floor( evt.x );\n            lastY = Math.floor( evt.y );\n            fxDown.start();\n            time = Date.now();\n        },\n        tap: function(evt) {\n            if( !that.enabled ) return;\n            console.log('TAP', evt);\n            that.tap.fire( evt );\n        }\n    });\n};\n\n\nmodule.exports = Touchable;\n\n\n\n/*\n https://jsfiddle.net/mzmaczdn/7/\n\n\n var div = document.createElement('div');\n div.className = 'shadow';\n\n var btn = document.querySelector('button');\n btn.addEventListener('mousedown', function(evt) {\n btn.className = \"press\";\n btn.appendChild( div );\n div.style.left = evt.offsetX + \"px\";\n div.style.top = evt.offsetY + \"px\";\n window.setTimeout(function() {\n div.style.transform = \"scale(1)\";\n });\n });\n\n btn.addEventListener('mouseup', function(evt) {\n div.style.transform = \"scale(0)\";\n btn.removeChild(div);\n });\n */\n\n\n  \nmodule.exports._ = _;\n});"],"names":["require","module","exports","_","X","D","arguments","en","fr","intl","all","$","Fx","Listeners","Touchable","elem","opts","that","this","enabled","color","classToAdd","opacity","element","tap","press","addClass","lastX","lastY","shadow","div","fxDown","css","transition","exec","session","cls","position","getComputedStyle","indexOf","style","overflow","rect","getBoundingClientRect","w","width","h","height","Math","max","radius","ceil","sqrt","left","top","margin","background","transform","add","wait","detach","time","on","down","evt","stopPropagation","preventDefault","floor","x","y","start","Date","now","console","log","fire"],"mappings":"AAA4BA,QAAS,gBAAiB,SAASA,EAASC,EAAQC,GAAW,GAAIC,GAAE,WAAuD,QAASA,KAAI,MAAOC,GAAEC,EAAEC,WAApE,GAAID,IAAGE,MAAQC,OAASJ,EAAEJ,EAAQ,KAAKS,IAAiD,OAARN,GAAEO,IAAIL,EAASF,KAqBvMQ,EAAIX,EAAQ,OACZY,EAAKZ,EAAQ,UACba,EAAYb,EAAQ,iBAEpBc,EAAY,SAASC,EAAMC,GAC3B,GAAIC,GAAOC,IAES,oBAATF,KAAuBA,MACN,mBAAjBA,GAAKG,UAA0BH,EAAKG,SAAU,GACzDJ,EAAOJ,EAAGI,GACVG,KAAKC,QAAUH,EAAKG,QACpBD,KAAKE,MAAQJ,EAAKI,OAAS,OAC3BF,KAAKG,WAAaL,EAAKK,WACvBH,KAAKI,QAAUN,EAAKM,SAAW,GAC/BJ,KAAKK,QAAUZ,EAAEI,GACjBG,KAAKM,IAAM,GAAIX,GACfK,KAAKO,MAAQ,GAAIZ,GAEjBF,EAAEe,SAAUX,EAAM,gBAClB,IAuCIY,GAAOC,EAvCPC,EAASlB,EAAEmB,IAAK,wBAChBC,EAASnB,IAAKoB,IAAKH,GAAUI,WAAY,SACpCC,KAAK,SAAUC,GACZ,GAAIC,GAAMnB,EAAKI,UACI,iBAARe,IACPzB,EAAEe,SAAUX,EAAMqB,EAGtB,IAAIC,GAAWC,iBAAiBvB,GAAMsB,UACjC,WAAY,WAAY,SAASE,QAASF,KAAc,IACzDtB,EAAKyB,MAAMH,SAAW,YAE1BtB,EAAKyB,MAAMC,SAAW,QACtB,IAAIC,GAAO3B,EAAK4B,wBACZC,EAAIF,EAAKG,MACTC,EAAIJ,EAAKK,MACbH,GAAII,KAAKC,IAAKtB,EAAOiB,EAAIjB,GACzBmB,EAAIE,KAAKC,IAAKrB,EAAOkB,EAAIlB,EACzB,IAAIsB,GAASF,KAAKG,KAAMH,KAAKI,KAAMR,EAAEA,EAAIE,EAAEA,GAC3CnC,GAAEqB,IAAKH,GACHwB,KAAM1B,EAAQ,KACd2B,IAAK1B,EAAQ,KACb2B,OAAQ,IAAML,EAAS,KACvBL,MAAO,EAAEK,EAAS,KAClBH,OAAQ,EAAEG,EAAS,KACnB5B,QAASL,EAAKK,QACdkC,WAAYvC,EAAKG,MACjBqC,UAAW,aAEf9C,EAAE+C,IAAK3C,EAAMc,KAEhBG,IAAKH,GAAUI,WAAY,iBAC3BD,IAAKH,GAAU4B,UAAW,aAC1BE,KAAM,KACN3B,IAAKH,GAAUI,WAAY,iBAC3BD,IAAKH,GAAUP,QAAS,IACxBqC,KAAM,KACNC,OAAQ/B,GACbgC,EAAO,CAIXlD,GAAEmD,GAAG/C,GACDgD,KAAM,SAASC,GACN/C,EAAKE,UACV6C,EAAIC,kBACJD,EAAIE,iBACJvC,EAAQqB,KAAKmB,MAAOH,EAAII,GACxBxC,EAAQoB,KAAKmB,MAAOH,EAAIK,GACxBtC,EAAOuC,QACPT,EAAOU,KAAKC,QAEhBhD,IAAK,SAASwC,GACL/C,EAAKE,UACVsD,QAAQC,IAAI,MAAOV,GACnB/C,EAAKO,IAAImD,KAAMX,OAM3B/D,GAAOC,QAAUY,EA8BjBb,EAAOC,QAAQC,EAAIA"},"dependencies":["mod/$","mod/dom","mod/dom.fx","mod/tfw.listeners"]}