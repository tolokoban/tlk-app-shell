{"intl":"var _=function(){var D={\"en\":{\"bad-repo\":\"Unable to contact this repository!\",\"confirm-exit\":\"Are you sure you want to exit this application?\",\"download-progress\":\"Downloading in progress: $1\",\"exit\":\"Exit\",\"install-progress\":\"Installation in progress: $1\",\"loading\":\"Downloading application files...\",\"repository\":\"Repository's URL\"},\"fr\":{\"bad-repo\":\"Le dépôt spécifié ne répond pas !\",\"confirm-exit\":\"Êtes-vous sûr de vouloir quitter cette application ?\",\"download-progress\":\"Téléchargement en cours: $1\",\"exit\":\"Quitter\",\"install-progress\":\"Installation en cours: $1\",\"loading\":\"Téléchargement de l'application...\",\"repository\":\"URL du dépôt\"}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n","src":"/** @module tolokoban-nw */require( 'tolokoban-nw', function(require, module, exports) { var _=function(){var D={\"en\":{\"bad-repo\":\"Unable to contact this repository!\",\"confirm-exit\":\"Are you sure you want to exit this application?\",\"download-progress\":\"Downloading in progress: $1\",\"exit\":\"Exit\",\"install-progress\":\"Installation in progress: $1\",\"loading\":\"Downloading application files...\",\"repository\":\"Repository's URL\"},\"fr\":{\"bad-repo\":\"Le dépôt spécifié ne répond pas !\",\"confirm-exit\":\"Êtes-vous sûr de vouloir quitter cette application ?\",\"download-progress\":\"Téléchargement en cours: $1\",\"exit\":\"Quitter\",\"install-progress\":\"Installation en cours: $1\",\"loading\":\"Téléchargement de l'application...\",\"repository\":\"URL du dépôt\"}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * This is an application container.\n * It manages updates in background.\n */\n\n\"use strict\";\n\nvar $ = require(\"dom\");\nvar DB = require(\"tfw.data-binding\");\nvar Err = require(\"tfw.message\").error;\nvar Text = require(\"wdg.text\");\nvar Wait = require(\"wdg.wait\");\nvar Modal = require(\"wdg.modal\");\nvar Local = require(\"tfw.storage\").local;\nvar Button = require(\"wdg.button\");\n\nvar FS = require(\"node://fs\");\nvar Path = require(\"node://path\");\n\nvar g_rootFolder = Path.resolve('.');\nconsole.info(\"[tolokoban-nw] g_rootFolder=\", g_rootFolder);\n\nexports.start = function() {\n    var installation = Local.get( 'tolokoban-nw/install', null );\n    if( installation ) upgrade( installation ).then(function() {\n        $('iframe').setAttribute( 'src', 'index.html' );\n    });\n    else launch();\n};\n\n\nexports.onExit = function() {\n    Modal.confirm(_('confirm-exit'), function() {\n        nw.Window.get().close();\n    });\n};\n\n\nfunction launch() {\n    FS.readFile(\"package.json\", function(err, out) {\n        if( err ) {\n            Err( err );\n            return;\n        }\n        try {\n            var jsn = out.toString();\n            var pkg = JSON.parse( out.toString() );\n            if( !checkForUpdates( pkg ) ) return;\n        } catch( ex ) {\n            Err(\"Bad JSON syntax in `package.json`!\");\n            return;\n        }\n        $('title').textContent = pkg.name + \" \" + pkg.version;\n        $('iframe').setAttribute( 'src', 'index.html' );\n    });\n}\n\n\n/**\n * Two cases: first install or update.\n */\nfunction checkForUpdates( pkg ) {\n    if( !pkg.tfw || !pkg.tfw.app\n        || typeof pkg.tfw.app.id !== 'string' )\n    {\n        install( pkg );\n        return false;\n    }\n\n    return true;\n}\n\n\nfunction install( pkg ) {\n    if( typeof pkg.tfw === 'undefined' ) pkg.tfw = {};\n    if( typeof pkg.tfw.app === 'undefined' ) pkg.tfw.app = {};\n    var repo = new Text({\n        label: _('repository'), wide: false, width: '30rem',\n        value: 'http://localhost/Cameroun/index.php'\n    });\n    var loading = new Modal({ padding: true, content: [new Wait({ text: _('loading') })] });\n    var ok = Button.Ok();\n    var content = $.div([\n        repo, ok\n    ]);\n    DB.bind( repo, 'action', ok, 'fire' );\n    var modal = new Modal({ padding: true, content: content });\n    modal.attach();\n    window.setTimeout(function() {\n        repo.focus = true;\n    }, 300);\n    ok.on(function() {\n        var url = repo.value.trim();\n        fetch( url ).then(function(response) {\n            console.info(\"[tolokoban-nw] response=\", response);\n            if( !response.ok ) {\n                Err(_('bad-repo') + \" - \" + response.status);\n                repo.focus = true;\n                return;\n            }\n            modal.detach();\n            Local.set('tolokoban-nw/repository', url);\n            return response.json();\n        }).then(function(list) {\n            console.info(\"[tolokoban-nw] list=\", list);\n            return fetch( url + '?' + list[0].id )\n        }).then(function(response) {\n            return response.json();\n        }).then(function(def) {\n            console.info(\"[tolokoban-nw] def=\", def);\n            loading.attach();\n            return download( def );\n        }).then(function() {\n            loading.detach();\n            location.reload();\n        }).catch(function(err) {\n            console.error( err );\n            Err( err );\n            modal.detach();\n        });\n    });\n}\n\n\nfunction download(def) {\n    // Check existence of download folder.\n    mkdir(\"tolokoban-nw/download\");\n\n    var downloadedFiles = [];\n    return new Promise(function (resolve, reject) {\n        var next = function() {\n            console.info(\"[tolokoban-nw] def=\", def);\n            if( def.files.length == 0 ) {\n                def.files = downloadedFiles;\n                Local.set('tolokoban-nw/install', def);\n                resolve();\n                return;\n            }\n            $('tooltip').textContent = _('download-progress', def.files.length);\n            var file = def.files.pop();\n            mkdir( 'tolokoban-nw/download/' + Path.dirname( file ) );\n            var url = def.url + file;\n            fetch( url ).then(function(response) {\n                if( !response.ok ) {\n                    throw Error(response.status + \" \" + response.statusText + \" - \" + url);\n                }\n                downloadedFiles.push( file );\n                return response.arrayBuffer();\n            }).then(function(arrayBuffer) {\n                var output = Path.resolve(Path.join(g_rootFolder, \"tolokoban-nw/download/\", file));\n                var data = new Buffer( arrayBuffer );\n                console.info(\"[tolokoban-nw] output=\", output);\n                console.info(\"[tolokoban-nw] arrayBuffer=\", arrayBuffer);\n                FS.writeFile( output, data, function( err ) {\n                    if( err ) throw Error(\"Unable to write file: \" + output + \"\\n\" + err);\n                    next();\n                });\n            }).catch( reject );\n        };\n\n        next();\n    });\n}\n\n\nfunction mkdir(folder) {\n    var folders = folder.split( '/' );\n    var dir = '.';\n    folders.forEach(function (folder) {\n        dir += '/' + folder;\n        if( !FS.existsSync( dir ) ) {\n            FS.mkdir( dir );\n        }\n    });\n}\n\n\nfunction upgrade( def ) {\n    return new Promise(function (resolve, reject) {\n        var next = function() {\n            if( def.files.length == 0 ) {\n                $('tooltip').textContent = '';\n                Local.set('tolokoban-nw/install', null);\n                resolve();\n                return;\n            }\n            $('tooltip').textContent = _('install-progress', def.files.length);\n            var file = def.files.pop();\n            mkdir( Path.dirname( file ) );\n            FS.readFile( \"./tolokoban-nw/download/\" + file, function(err, data) {\n                if( err ) {\n                    console.error( err );\n                    reject( err );\n                    return;\n                }\n                FS.writeFile( file, data, function( err ) {\n                    if( err ) {\n                        console.error( err );\n                        reject( err );\n                        return;\n                    }\n                    next();\n                });\n            });\n        };        \n        next();\n    });\n}\n\n\n  \nmodule.exports._ = _;\n/**\n * @module tolokoban-nw\n * @see module:$\n * @see module:dom\n * @see module:tfw.data-binding\n * @see module:tfw.message\n * @see module:wdg.text\n * @see module:wdg.wait\n * @see module:wdg.modal\n * @see module:tfw.storage\n * @see module:wdg.button\n\n */\n});","zip":"require(\"tolokoban-nw\",function(o,n,t){function e(){b.readFile(\"package.json\",function(o,n){if(o)return void d(o);try{var t=(n.toString(),JSON.parse(n.toString()));if(!i(t))return}catch(o){return void d(\"Bad JSON syntax in `package.json`!\")}c(\"title\").textContent=t.name+\" \"+t.version,c(\"iframe\").setAttribute(\"src\",\"index.html\")})}function i(o){return!(!o.tfw||!o.tfw.app||\"string\"!=typeof o.tfw.app.id)||(r(o),!1)}function r(o){\"undefined\"==typeof o.tfw&&(o.tfw={}),\"undefined\"==typeof o.tfw.app&&(o.tfw.app={});var n=new p({label:f(\"repository\"),wide:!1,width:\"30rem\",value:\"http://localhost/Cameroun/index.php\"}),t=new h({padding:!0,content:[new w({text:f(\"loading\")})]}),e=v.Ok(),i=c.div([n,e]);u.bind(n,\"action\",e,\"fire\");var r=new h({padding:!0,content:i});r.attach(),window.setTimeout(function(){n.focus=!0},300),e.on(function(){var o=n.value.trim();fetch(o).then(function(t){return console.info(\"[tolokoban-nw] response=\",t),t.ok?(r.detach(),g.set(\"tolokoban-nw/repository\",o),t.json()):(d(f(\"bad-repo\")+\" - \"+t.status),void(n.focus=!0))}).then(function(n){return console.info(\"[tolokoban-nw] list=\",n),fetch(o+\"?\"+n[0].id)}).then(function(o){return o.json()}).then(function(o){return console.info(\"[tolokoban-nw] def=\",o),t.attach(),a(o)}).then(function(){t.detach(),location.reload()}).catch(function(o){console.error(o),d(o),r.detach()})})}function a(o){l(\"tolokoban-nw/download\");var n=[];return new Promise(function(t,e){var i=function(){if(console.info(\"[tolokoban-nw] def=\",o),0==o.files.length)return o.files=n,g.set(\"tolokoban-nw/install\",o),void t();c(\"tooltip\").textContent=f(\"download-progress\",o.files.length);var r=o.files.pop();l(\"tolokoban-nw/download/\"+m.dirname(r));var a=o.url+r;fetch(a).then(function(o){if(!o.ok)throw Error(o.status+\" \"+o.statusText+\" - \"+a);return n.push(r),o.arrayBuffer()}).then(function(o){var n=m.resolve(m.join(k,\"tolokoban-nw/download/\",r)),t=new Buffer(o);console.info(\"[tolokoban-nw] output=\",n),console.info(\"[tolokoban-nw] arrayBuffer=\",o),b.writeFile(n,t,function(o){if(o)throw Error(\"Unable to write file: \"+n+\"\\n\"+o);i()})}).catch(e)};i()})}function l(o){var n=o.split(\"/\"),t=\".\";n.forEach(function(o){t+=\"/\"+o,b.existsSync(t)||b.mkdir(t)})}function s(o){return new Promise(function(n,t){var e=function(){if(0==o.files.length)return c(\"tooltip\").textContent=\"\",g.set(\"tolokoban-nw/install\",null),void n();c(\"tooltip\").textContent=f(\"install-progress\",o.files.length);var i=o.files.pop();l(m.dirname(i)),b.readFile(\"./tolokoban-nw/download/\"+i,function(o,n){return o?(console.error(o),void t(o)):void b.writeFile(i,n,function(o){return o?(console.error(o),void t(o)):void e()})})};e()})}var f=function(){function n(){return e(t,arguments)}var t={en:{\"bad-repo\":\"Unable to contact this repository!\",\"confirm-exit\":\"Are you sure you want to exit this application?\",\"download-progress\":\"Downloading in progress: $1\",exit:\"Exit\",\"install-progress\":\"Installation in progress: $1\",loading:\"Downloading application files...\",repository:\"Repository's URL\"},fr:{\"bad-repo\":\"Le dépôt spécifié ne répond pas !\",\"confirm-exit\":\"Êtes-vous sûr de vouloir quitter cette application ?\",\"download-progress\":\"Téléchargement en cours: $1\",exit:\"Quitter\",\"install-progress\":\"Installation en cours: $1\",loading:\"Téléchargement de l'application...\",repository:\"URL du dépôt\"}},e=o(\"$\").intl;return n.all=t,n}(),c=o(\"dom\"),u=o(\"tfw.data-binding\"),d=o(\"tfw.message\").error,p=o(\"wdg.text\"),w=o(\"wdg.wait\"),h=o(\"wdg.modal\"),g=o(\"tfw.storage\").local,v=o(\"wdg.button\"),b=o(\"node://fs\"),m=o(\"node://path\"),k=m.resolve(\".\");console.info(\"[tolokoban-nw] g_rootFolder=\",k),t.start=function(){var o=g.get(\"tolokoban-nw/install\",null);o?s(o).then(function(){c(\"iframe\").setAttribute(\"src\",\"index.html\")}):e()},t.onExit=function(){h.confirm(f(\"confirm-exit\"),function(){nw.Window.get().close()})},n.exports._=f});\n//# sourceMappingURL=tolokoban-nw.js.map","map":{"version":3,"file":"tolokoban-nw.js","sources":["tolokoban-nw.js"],"sourcesContent":["/** @module tolokoban-nw */require( 'tolokoban-nw', function(require, module, exports) { var _=function(){var D={\"en\":{\"bad-repo\":\"Unable to contact this repository!\",\"confirm-exit\":\"Are you sure you want to exit this application?\",\"download-progress\":\"Downloading in progress: $1\",\"exit\":\"Exit\",\"install-progress\":\"Installation in progress: $1\",\"loading\":\"Downloading application files...\",\"repository\":\"Repository's URL\"},\"fr\":{\"bad-repo\":\"Le dépôt spécifié ne répond pas !\",\"confirm-exit\":\"Êtes-vous sûr de vouloir quitter cette application ?\",\"download-progress\":\"Téléchargement en cours: $1\",\"exit\":\"Quitter\",\"install-progress\":\"Installation en cours: $1\",\"loading\":\"Téléchargement de l'application...\",\"repository\":\"URL du dépôt\"}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * This is an application container.\n * It manages updates in background.\n */\n\n\"use strict\";\n\nvar $ = require(\"dom\");\nvar DB = require(\"tfw.data-binding\");\nvar Err = require(\"tfw.message\").error;\nvar Text = require(\"wdg.text\");\nvar Wait = require(\"wdg.wait\");\nvar Modal = require(\"wdg.modal\");\nvar Local = require(\"tfw.storage\").local;\nvar Button = require(\"wdg.button\");\n\nvar FS = require(\"node://fs\");\nvar Path = require(\"node://path\");\n\nvar g_rootFolder = Path.resolve('.');\nconsole.info(\"[tolokoban-nw] g_rootFolder=\", g_rootFolder);\n\nexports.start = function() {\n    var installation = Local.get( 'tolokoban-nw/install', null );\n    if( installation ) upgrade( installation ).then(function() {\n        $('iframe').setAttribute( 'src', 'index.html' );\n    });\n    else launch();\n};\n\n\nexports.onExit = function() {\n    Modal.confirm(_('confirm-exit'), function() {\n        nw.Window.get().close();\n    });\n};\n\n\nfunction launch() {\n    FS.readFile(\"package.json\", function(err, out) {\n        if( err ) {\n            Err( err );\n            return;\n        }\n        try {\n            var jsn = out.toString();\n            var pkg = JSON.parse( out.toString() );\n            if( !checkForUpdates( pkg ) ) return;\n        } catch( ex ) {\n            Err(\"Bad JSON syntax in `package.json`!\");\n            return;\n        }\n        $('title').textContent = pkg.name + \" \" + pkg.version;\n        $('iframe').setAttribute( 'src', 'index.html' );\n    });\n}\n\n\n/**\n * Two cases: first install or update.\n */\nfunction checkForUpdates( pkg ) {\n    if( !pkg.tfw || !pkg.tfw.app\n        || typeof pkg.tfw.app.id !== 'string' )\n    {\n        install( pkg );\n        return false;\n    }\n\n    return true;\n}\n\n\nfunction install( pkg ) {\n    if( typeof pkg.tfw === 'undefined' ) pkg.tfw = {};\n    if( typeof pkg.tfw.app === 'undefined' ) pkg.tfw.app = {};\n    var repo = new Text({\n        label: _('repository'), wide: false, width: '30rem',\n        value: 'http://localhost/Cameroun/index.php'\n    });\n    var loading = new Modal({ padding: true, content: [new Wait({ text: _('loading') })] });\n    var ok = Button.Ok();\n    var content = $.div([\n        repo, ok\n    ]);\n    DB.bind( repo, 'action', ok, 'fire' );\n    var modal = new Modal({ padding: true, content: content });\n    modal.attach();\n    window.setTimeout(function() {\n        repo.focus = true;\n    }, 300);\n    ok.on(function() {\n        var url = repo.value.trim();\n        fetch( url ).then(function(response) {\n            console.info(\"[tolokoban-nw] response=\", response);\n            if( !response.ok ) {\n                Err(_('bad-repo') + \" - \" + response.status);\n                repo.focus = true;\n                return;\n            }\n            modal.detach();\n            Local.set('tolokoban-nw/repository', url);\n            return response.json();\n        }).then(function(list) {\n            console.info(\"[tolokoban-nw] list=\", list);\n            return fetch( url + '?' + list[0].id )\n        }).then(function(response) {\n            return response.json();\n        }).then(function(def) {\n            console.info(\"[tolokoban-nw] def=\", def);\n            loading.attach();\n            return download( def );\n        }).then(function() {\n            loading.detach();\n            location.reload();\n        }).catch(function(err) {\n            console.error( err );\n            Err( err );\n            modal.detach();\n        });\n    });\n}\n\n\nfunction download(def) {\n    // Check existence of download folder.\n    mkdir(\"tolokoban-nw/download\");\n\n    var downloadedFiles = [];\n    return new Promise(function (resolve, reject) {\n        var next = function() {\n            console.info(\"[tolokoban-nw] def=\", def);\n            if( def.files.length == 0 ) {\n                def.files = downloadedFiles;\n                Local.set('tolokoban-nw/install', def);\n                resolve();\n                return;\n            }\n            $('tooltip').textContent = _('download-progress', def.files.length);\n            var file = def.files.pop();\n            mkdir( 'tolokoban-nw/download/' + Path.dirname( file ) );\n            var url = def.url + file;\n            fetch( url ).then(function(response) {\n                if( !response.ok ) {\n                    throw Error(response.status + \" \" + response.statusText + \" - \" + url);\n                }\n                downloadedFiles.push( file );\n                return response.arrayBuffer();\n            }).then(function(arrayBuffer) {\n                var output = Path.resolve(Path.join(g_rootFolder, \"tolokoban-nw/download/\", file));\n                var data = new Buffer( arrayBuffer );\n                console.info(\"[tolokoban-nw] output=\", output);\n                console.info(\"[tolokoban-nw] arrayBuffer=\", arrayBuffer);\n                FS.writeFile( output, data, function( err ) {\n                    if( err ) throw Error(\"Unable to write file: \" + output + \"\\n\" + err);\n                    next();\n                });\n            }).catch( reject );\n        };\n\n        next();\n    });\n}\n\n\nfunction mkdir(folder) {\n    var folders = folder.split( '/' );\n    var dir = '.';\n    folders.forEach(function (folder) {\n        dir += '/' + folder;\n        if( !FS.existsSync( dir ) ) {\n            FS.mkdir( dir );\n        }\n    });\n}\n\n\nfunction upgrade( def ) {\n    return new Promise(function (resolve, reject) {\n        var next = function() {\n            if( def.files.length == 0 ) {\n                $('tooltip').textContent = '';\n                Local.set('tolokoban-nw/install', null);\n                resolve();\n                return;\n            }\n            $('tooltip').textContent = _('install-progress', def.files.length);\n            var file = def.files.pop();\n            mkdir( Path.dirname( file ) );\n            FS.readFile( \"./tolokoban-nw/download/\" + file, function(err, data) {\n                if( err ) {\n                    console.error( err );\n                    reject( err );\n                    return;\n                }\n                FS.writeFile( file, data, function( err ) {\n                    if( err ) {\n                        console.error( err );\n                        reject( err );\n                        return;\n                    }\n                    next();\n                });\n            });\n        };        \n        next();\n    });\n}\n\n\n  \nmodule.exports._ = _;\n});"],"names":["require","module","exports","launch","FS","readFile","err","out","Err","pkg","toString","JSON","parse","checkForUpdates","ex","$","textContent","name","version","setAttribute","tfw","app","id","install","repo","Text","label","_","wide","width","value","loading","Modal","padding","content","Wait","text","ok","Button","Ok","div","DB","bind","modal","attach","window","setTimeout","focus","on","url","trim","fetch","then","response","console","info","detach","Local","set","json","status","list","def","download","location","reload","catch","error","mkdir","downloadedFiles","Promise","resolve","reject","next","files","length","file","pop","Path","dirname","Error","statusText","push","arrayBuffer","output","join","g_rootFolder","data","Buffer","writeFile","folder","folders","split","dir","forEach","existsSync","upgrade","X","D","arguments","en","bad-repo","confirm-exit","download-progress","exit","install-progress","repository","fr","intl","all","local","start","installation","get","onExit","confirm","nw","Window","close"],"mappings":"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"},"dependencies":["mod/$","mod/dom","mod/tfw.data-binding","mod/tfw.message","mod/wdg.text","mod/wdg.wait","mod/wdg.modal","mod/tfw.storage","mod/wdg.button"]}