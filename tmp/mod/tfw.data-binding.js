{"intl":"var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n","src":"/** @module tfw.data-binding */require( 'tfw.data-binding', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * @module\n *\n * Provide all the functions needed for data-binding.\n *\n * @example\n * var DB = require('tfw.data-binding');\n * DB.propAddClass( widget, 'visible', 'show' );\n */\nrequire(\"polyfill.string\");\nvar $ = require(\"dom\");\nvar ParseUnit = require(\"tfw.css\").parseUnit;\nvar Listeners = require(\"tfw.listeners\");\n\n\nvar ID = '_tfw.data-binding_';\n\nvar converters = {\n    castArray: function(v) {\n        if (Array.isArray( v )) return v;\n        if( v === null || v === undefined ) return [];\n        return [v];\n    },\n    castBoolean: function(v) {\n        if (typeof v === 'boolean') return v;\n        if (typeof v === 'string') {\n            v = v.trim().toLowerCase();\n            if (v == '0' || v == 'false' || v == 'no' || v == 'null' || v == 'undefined') {\n                return false;\n            }\n            return true;\n        }\n        if (typeof v === 'number') {\n            return v != 0 ? true : false;\n        }\n        return null;\n    },\n    castColor: function(v) {\n        return \"\" + v;\n    },\n    castDate: function(v) {\n        if( typeof v === 'number' || typeof v === 'string' )\n            return new Date(v);\n        if( v instanceof Date ) return v;\n        return new Date();\n    },\n    castEnum: function( enumeration ) {\n        var lowerCaseEnum = enumeration.map(String.toLowerCase);\n        return function(v) {\n            if (typeof v === 'number') {\n                return enumeration[Math.floor( v ) % enumeration.length];\n            }\n            if (typeof v !== 'string') return enumeration[0];\n            var idx = lowerCaseEnum.indexOf( v.trim().toLowerCase() );\n            if (idx < 0) idx = 0;\n            return enumeration[idx];\n        };\n    },\n    castInteger: function(v) {\n        if (typeof v === 'number') {\n            return Math.floor( v );\n        }\n        if (typeof v === 'boolean') return v ? 1 : 0;\n        if (typeof v === 'string') {\n            return parseInt( v );\n        }\n        return Number.NaN;\n    },\n    castRegexp: function(v) {\n        if (v instanceof RegExp) return v;\n        if (typeof v === 'string' && v.trim().length != 0 ) {\n            try {\n                return new RegExp( v );\n            }\n            // Ignore Regular Expression errors.\n            catch (ex) {\n                console.error(\"[castRegexp] /\" + v + \"/ \", ex);\n            }\n        };\n        return null;\n    },\n    castString: function(v) {\n        if (typeof v === 'string') return v;\n        if (v === undefined || v === null) return '';\n        return JSON.stringify( v );\n    },\n    castStringArray: function(v) {\n        if( Array.isArray( v ) ) return v;\n        if( v === null || v === undefined ) return [];\n        if( typeof v === 'string' ) {\n            return v.split( ',' ).map(String.trim);\n        }\n        return [JSON.stringify( v )];\n    },\n    castUnit: function(v) {\n        if( !v ) return { v: 0, u: 'px' };\n        if( typeof v.v !== 'undefined' ) {\n            v.v = parseFloat( v.v );\n            if( isNaN( v.v ) ) return { v: 0, u: 'px' };\n            if( typeof v.u !== 'string' ) v.u = 'px';\n            return { v: v.v, u: v.u };\n        }\n        if( typeof v === 'number' ) return { v: v, u: 'px' };\n        if( typeof v !== 'string' ) return { v: 0, u: 'px' };\n        return ParseUnit( '' + v );\n    },\n    castValidator: function(v) {\n        if (typeof v === 'function') return v;\n        if (typeof v === 'boolean') return function() { return v; };\n        if (typeof v === 'string' && v.trim().length != 0 ) {\n            try {\n                var rx = new RegExp( v );\n                return rx.test.bind( rx );\n            }\n            // Ignore Regular Expression errors.\n            catch (ex) {\n                console.error(\"[castValidator] /\" + v + \"/ \", ex);\n            }\n        };\n        return function() { return null; };\n    }\n};\n\n/**\n * @param {any|function} val - Default value, or a specific getter (if `val` is a function).\n */\nfunction propCast( caster, obj, att, val ) {\n    var hasSpecialGetter = typeof val === 'function';\n    if( typeof obj[ID] === 'undefined' ) obj[ID] = {};\n    obj[ID][att] = {\n        value: val,\n        event: new Listeners()\n    };\n    var setter;\n    if (typeof caster === 'function') {\n        setter = function(v) {\n            v = caster( v );\n            // If there is a special getter, any set will fire.\n            // Otherwise, we fire only if the value has changed.\n            if( hasSpecialGetter || obj[ID][att].value !== v) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    } else {\n        setter = function(v) {\n            // If there is a special getter, any set will fire.\n            // Otherwise, we fire only if the value has changed.\n            if( hasSpecialGetter || obj[ID][att].value !== v ) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    }\n    var getter = val;\n    if (!hasSpecialGetter) {\n        // Default getter.\n        getter = function() { return obj[ID][att].value; };\n    }\n    Object.defineProperty( obj, att, {\n        get: getter,\n        set: setter,\n        configurable: false,\n        enumerable: true\n    });\n    return exports.bind.bind(exports, obj, att);\n};\n\n/**\n * @export function fire\n *\n * Set a new value and fire the event even if the value has not changed.\n */\nexports.fire = function( obj, att, val ) {\n    var currentValue = obj[att];\n    if( typeof val === 'undefined' ) val = currentValue;\n\n    obj[ID][att].value = val;\n    obj[ID][att].event.fire( obj[att], obj, att );\n};\n\n/**\n * @export function set\n *\n * Set a new value without firing any event.\n */\nexports.set = function( obj, att, val ) {\n    if( typeof obj[ID] === 'undefined' ) obj[ID] = {};\n    if( typeof obj[ID][att] === 'undefined' ) obj[ID][att] = {};\n    obj[ID][att].value = val;\n};\n\n/**\n * @export function get\n *\n * Get a value without firing any event.\n */\nexports.get = function( obj, att ) {\n    if( typeof obj[ID] === 'undefined' ) return undefined;\n    if( typeof obj[ID][att] === 'undefined' ) return undefined;\n    return obj[ID][att].value;\n};\n\n/**\n * Create a property on which we can bind another property.\n * \n * @param {object} obj - Object to which we want to add a property.\n * @param {string} att - Name of the attribute of `obj`.\n * \n */\nexports.prop = propCast.bind( null, null );\n/**\n * @export @function propToggleClass\n * Create an enum attribute which toggles a CSS class when assigned.\n *\n * @param {array|object} values - If this is an array, we will convert\n * it  into an  object.  For instance `[\"show\",  \"hide\"]` will  become\n * `{show: \"show\", hide: \"hide\"}`.\n */\nexports.propToggleClass = function( target, attribute, values, prefix ) {\n    if( typeof prefix !== 'string' ) prefix = '';\n    var convertedValues = {};\n    if (typeof values === 'string') {\n        convertedValues[values] = values;\n    }\n    else if (Array.isArray(values)) {\n        values.forEach(function (itm) {\n            convertedValues[itm] = itm;\n        });\n    }\n    else {\n        convertedValues = values;\n    }\n    propCast( null, target, attribute )(function(v) {\n        var key, val;\n        for( key in convertedValues ) {\n            val = convertedValues[key];\n            if (key == v) {\n                $.addClass( target.element, prefix + val);\n            } else {\n                $.removeClass( target.element, prefix + val);\n            }\n        }\n    });\n};\n/**\n * @export @function propAddClass\n * Create a boolean attribute that toggle a CSS class on the `element` attribute of `target`.\n * If the value id `true`, `className` is added.\n * @example\n * DB.propAddClass( this, 'wide', 'fullscreen' );\n * DB.propAddClass( this, 'wide' );\n */\nexports.propAddClass = function( target, attribute, className ) {\n    if( typeof className === 'undefined' ) className = attribute;\n    propCast( converters.castBoolean, target, attribute )(function(v) {\n        if (v) $.addClass( target.element, className );\n        else $.removeClass( target.element, className );\n    });\n};\n/**\n * @export @function propAddClass\n * Create a boolean attribute that toggle a CSS class on the `element` attribute of `target`.\n * If the value id `true`, `className` is removed.\n * @example\n * DB.propRemoveClass( this, 'visible', 'hide' );\n */\nexports.propRemoveClass = function( target, attribute, className ) {\n    if( typeof className === 'undefined' ) className = attribute;\n    propCast( converters.castBoolean, target, attribute )(function(v) {\n        if (v) $.removeClass( target.element, className );\n        else $.addClass( target.element, className );\n    });\n};\nexports.propArray = propCast.bind( null, converters.castArray );\nexports.propBoolean = propCast.bind( null, converters.castBoolean );\nexports.propColor = propCast.bind( null, converters.castColor );\nexports.propDate = propCast.bind( null, converters.castDate );\nexports.propEnum = function( enumeration ) {\n    return propCast.bind( null, converters.castEnum( enumeration ) );\n};\nexports.propInteger = propCast.bind( null, converters.castInteger );\nexports.propRegexp = propCast.bind( null, converters.castRegexp );\nexports.propString = propCast.bind( null, converters.castString );\nexports.propStringArray = propCast.bind( null, converters.castStringArray );\nexports.propUnit = propCast.bind( null, converters.castUnit );\nexports.propValidator = propCast.bind( null, converters.castValidator );\n\nexports.bind = function( srcObj, srcAtt, dstObj, dstAtt, options ) {\n    if( typeof srcObj[ID] === 'undefined' || typeof srcObj[ID][srcAtt] === 'undefined' ) {\n        console.error( JSON.stringify( srcAtt ) + \" is not a bindable property!\", {\n            srcObj: srcObj,\n            srcAtt: srcAtt,\n            dstObj: dstObj,\n            dstAtt: dstAtt,\n            options: options\n        });\n        throw Error( JSON.stringify( srcAtt ) + \" is not a bindable property!\" );\n    }\n\n    if( typeof options === 'undefined' ) options = {};\n    if (options.value) {\n        options.converter = function() {\n            return options.value;\n        };\n    }\n    var lambda = typeof dstObj === 'function' ? dstObj : function(v, obj, att) {\n        dstObj[dstAtt] = typeof options.converter === 'function' ? options.converter(v) : v;\n    };\n    srcObj[ID][srcAtt].event.add( lambda );\n\n    return options;\n};\n\n\nexports.extend = function( def, ext, obj ) {\n    var out = JSON.parse( JSON.stringify( def ) );\n\n    var key, val;\n    for( key in ext ) {\n        if (key.charAt(0) == '$') continue;\n        val = ext[key];\n        if( typeof out[key] === 'undefined' ) {\n            console.error(\"[tfw.data-binding.extend] Undefined argument: `\" + key + \"`!\");\n        } else {\n            out[key] = val;\n        }\n    }\n\n    if (typeof obj !== 'undefined') {\n        for( key in ext ) {\n            if (key.charAt(0) != '$') continue;\n            Object.defineProperty( obj, key, {\n                value: ext[key],\n                writable: false,\n                configurable: false,\n                enumerable: false\n            });\n        }\n        // Setting values.\n        for( key in out ) {\n            if (key.charAt(0) == '$') continue;\n            obj[key] = out[key];\n        }\n    }\n\n    return out;\n};\n\n\nexports.converters = converters;\n\n\n  \nmodule.exports._ = _;\n/**\n * @module tfw.data-binding\n * @see module:$\n * @see module:polyfill.string\n * @see module:dom\n * @see module:tfw.css\n * @see module:tfw.listeners\n\n */\n});","zip":"require(\"tfw.data-binding\",function(n,t,r){function e(n,t,e,o){var i=\"function\"==typeof o;void 0===t[l]&&(t[l]={}),t[l][e]={value:o,event:new u};var a;a=\"function\"==typeof n?function(r){r=n(r),(i||t[l][e].value!==r)&&(t[l][e].value=r,t[l][e].event.fire(r,t,e))}:function(n){(i||t[l][e].value!==n)&&(t[l][e].value=n,t[l][e].event.fire(n,t,e))};var f=o;return i||(f=function(){return t[l][e].value}),Object.defineProperty(t,e,{get:f,set:a,configurable:!1,enumerable:!0}),r.bind.bind(r,t,e)}var o=function(){function t(){return e(r,arguments)}var r={en:{}},e=n(\"$\").intl;return t.all=r,t}();n(\"polyfill.string\");var i=n(\"dom\"),a=n(\"tfw.css\").parseUnit,u=n(\"tfw.listeners\"),l=\"_tfw.data-binding_\",f={castArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:[n]},castBoolean:function(n){return\"boolean\"==typeof n?n:\"string\"==typeof n?(n=n.trim().toLowerCase(),\"0\"!=n&&\"false\"!=n&&\"no\"!=n&&\"null\"!=n&&\"undefined\"!=n):\"number\"==typeof n?0!=n:null},castColor:function(n){return\"\"+n},castDate:function(n){return\"number\"==typeof n||\"string\"==typeof n?new Date(n):n instanceof Date?n:new Date},castEnum:function(n){var t=n.map(String.toLowerCase);return function(r){if(\"number\"==typeof r)return n[Math.floor(r)%n.length];if(\"string\"!=typeof r)return n[0];var e=t.indexOf(r.trim().toLowerCase());return e<0&&(e=0),n[e]}},castInteger:function(n){return\"number\"==typeof n?Math.floor(n):\"boolean\"==typeof n?n?1:0:\"string\"==typeof n?parseInt(n):Number.NaN},castRegexp:function(n){if(n instanceof RegExp)return n;if(\"string\"==typeof n&&0!=n.trim().length)try{return new RegExp(n)}catch(t){console.error(\"[castRegexp] /\"+n+\"/ \",t)}return null},castString:function(n){return\"string\"==typeof n?n:void 0===n||null===n?\"\":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:\"string\"==typeof n?n.split(\",\").map(String.trim):[JSON.stringify(n)]},castUnit:function(n){return n?void 0!==n.v?(n.v=parseFloat(n.v),isNaN(n.v)?{v:0,u:\"px\"}:(\"string\"!=typeof n.u&&(n.u=\"px\"),{v:n.v,u:n.u})):\"number\"==typeof n?{v:n,u:\"px\"}:\"string\"!=typeof n?{v:0,u:\"px\"}:a(\"\"+n):{v:0,u:\"px\"}},castValidator:function(n){if(\"function\"==typeof n)return n;if(\"boolean\"==typeof n)return function(){return n};if(\"string\"==typeof n&&0!=n.trim().length)try{var t=new RegExp(n);return t.test.bind(t)}catch(t){console.error(\"[castValidator] /\"+n+\"/ \",t)}return function(){return null}}};r.fire=function(n,t,r){var e=n[t];void 0===r&&(r=e),n[l][t].value=r,n[l][t].event.fire(n[t],n,t)},r.set=function(n,t,r){void 0===n[l]&&(n[l]={}),void 0===n[l][t]&&(n[l][t]={}),n[l][t].value=r},r.get=function(n,t){if(void 0!==n[l]&&void 0!==n[l][t])return n[l][t].value},r.prop=e.bind(null,null),r.propToggleClass=function(n,t,r,o){\"string\"!=typeof o&&(o=\"\");var a={};\"string\"==typeof r?a[r]=r:Array.isArray(r)?r.forEach(function(n){a[n]=n}):a=r,e(null,n,t)(function(t){var r,e;for(r in a)e=a[r],r==t?i.addClass(n.element,o+e):i.removeClass(n.element,o+e)})},r.propAddClass=function(n,t,r){void 0===r&&(r=t),e(f.castBoolean,n,t)(function(t){t?i.addClass(n.element,r):i.removeClass(n.element,r)})},r.propRemoveClass=function(n,t,r){void 0===r&&(r=t),e(f.castBoolean,n,t)(function(t){t?i.removeClass(n.element,r):i.addClass(n.element,r)})},r.propArray=e.bind(null,f.castArray),r.propBoolean=e.bind(null,f.castBoolean),r.propColor=e.bind(null,f.castColor),r.propDate=e.bind(null,f.castDate),r.propEnum=function(n){return e.bind(null,f.castEnum(n))},r.propInteger=e.bind(null,f.castInteger),r.propRegexp=e.bind(null,f.castRegexp),r.propString=e.bind(null,f.castString),r.propStringArray=e.bind(null,f.castStringArray),r.propUnit=e.bind(null,f.castUnit),r.propValidator=e.bind(null,f.castValidator),r.bind=function(n,t,r,e,o){if(void 0===n[l]||void 0===n[l][t])throw console.error(JSON.stringify(t)+\" is not a bindable property!\",{srcObj:n,srcAtt:t,dstObj:r,dstAtt:e,options:o}),Error(JSON.stringify(t)+\" is not a bindable property!\");void 0===o&&(o={}),o.value&&(o.converter=function(){return o.value});var i=\"function\"==typeof r?r:function(n,t,i){r[e]=\"function\"==typeof o.converter?o.converter(n):n};return n[l][t].event.add(i),o},r.extend=function(n,t,r){var e,o,i=JSON.parse(JSON.stringify(n));for(e in t)\"$\"!=e.charAt(0)&&(o=t[e],void 0===i[e]?console.error(\"[tfw.data-binding.extend] Undefined argument: `\"+e+\"`!\"):i[e]=o);if(void 0!==r){for(e in t)\"$\"==e.charAt(0)&&Object.defineProperty(r,e,{value:t[e],writable:!1,configurable:!1,enumerable:!1});for(e in i)\"$\"!=e.charAt(0)&&(r[e]=i[e])}return i},r.converters=f,t.exports._=o});\n//# sourceMappingURL=tfw.data-binding.js.map","map":{"version":3,"file":"tfw.data-binding.js","sources":["tfw.data-binding.js"],"sourcesContent":["/** @module tfw.data-binding */require( 'tfw.data-binding', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    /**\n * @module\n *\n * Provide all the functions needed for data-binding.\n *\n * @example\n * var DB = require('tfw.data-binding');\n * DB.propAddClass( widget, 'visible', 'show' );\n */\nrequire(\"polyfill.string\");\nvar $ = require(\"dom\");\nvar ParseUnit = require(\"tfw.css\").parseUnit;\nvar Listeners = require(\"tfw.listeners\");\n\n\nvar ID = '_tfw.data-binding_';\n\nvar converters = {\n    castArray: function(v) {\n        if (Array.isArray( v )) return v;\n        if( v === null || v === undefined ) return [];\n        return [v];\n    },\n    castBoolean: function(v) {\n        if (typeof v === 'boolean') return v;\n        if (typeof v === 'string') {\n            v = v.trim().toLowerCase();\n            if (v == '0' || v == 'false' || v == 'no' || v == 'null' || v == 'undefined') {\n                return false;\n            }\n            return true;\n        }\n        if (typeof v === 'number') {\n            return v != 0 ? true : false;\n        }\n        return null;\n    },\n    castColor: function(v) {\n        return \"\" + v;\n    },\n    castDate: function(v) {\n        if( typeof v === 'number' || typeof v === 'string' )\n            return new Date(v);\n        if( v instanceof Date ) return v;\n        return new Date();\n    },\n    castEnum: function( enumeration ) {\n        var lowerCaseEnum = enumeration.map(String.toLowerCase);\n        return function(v) {\n            if (typeof v === 'number') {\n                return enumeration[Math.floor( v ) % enumeration.length];\n            }\n            if (typeof v !== 'string') return enumeration[0];\n            var idx = lowerCaseEnum.indexOf( v.trim().toLowerCase() );\n            if (idx < 0) idx = 0;\n            return enumeration[idx];\n        };\n    },\n    castInteger: function(v) {\n        if (typeof v === 'number') {\n            return Math.floor( v );\n        }\n        if (typeof v === 'boolean') return v ? 1 : 0;\n        if (typeof v === 'string') {\n            return parseInt( v );\n        }\n        return Number.NaN;\n    },\n    castRegexp: function(v) {\n        if (v instanceof RegExp) return v;\n        if (typeof v === 'string' && v.trim().length != 0 ) {\n            try {\n                return new RegExp( v );\n            }\n            // Ignore Regular Expression errors.\n            catch (ex) {\n                console.error(\"[castRegexp] /\" + v + \"/ \", ex);\n            }\n        };\n        return null;\n    },\n    castString: function(v) {\n        if (typeof v === 'string') return v;\n        if (v === undefined || v === null) return '';\n        return JSON.stringify( v );\n    },\n    castStringArray: function(v) {\n        if( Array.isArray( v ) ) return v;\n        if( v === null || v === undefined ) return [];\n        if( typeof v === 'string' ) {\n            return v.split( ',' ).map(String.trim);\n        }\n        return [JSON.stringify( v )];\n    },\n    castUnit: function(v) {\n        if( !v ) return { v: 0, u: 'px' };\n        if( typeof v.v !== 'undefined' ) {\n            v.v = parseFloat( v.v );\n            if( isNaN( v.v ) ) return { v: 0, u: 'px' };\n            if( typeof v.u !== 'string' ) v.u = 'px';\n            return { v: v.v, u: v.u };\n        }\n        if( typeof v === 'number' ) return { v: v, u: 'px' };\n        if( typeof v !== 'string' ) return { v: 0, u: 'px' };\n        return ParseUnit( '' + v );\n    },\n    castValidator: function(v) {\n        if (typeof v === 'function') return v;\n        if (typeof v === 'boolean') return function() { return v; };\n        if (typeof v === 'string' && v.trim().length != 0 ) {\n            try {\n                var rx = new RegExp( v );\n                return rx.test.bind( rx );\n            }\n            // Ignore Regular Expression errors.\n            catch (ex) {\n                console.error(\"[castValidator] /\" + v + \"/ \", ex);\n            }\n        };\n        return function() { return null; };\n    }\n};\n\n/**\n * @param {any|function} val - Default value, or a specific getter (if `val` is a function).\n */\nfunction propCast( caster, obj, att, val ) {\n    var hasSpecialGetter = typeof val === 'function';\n    if( typeof obj[ID] === 'undefined' ) obj[ID] = {};\n    obj[ID][att] = {\n        value: val,\n        event: new Listeners()\n    };\n    var setter;\n    if (typeof caster === 'function') {\n        setter = function(v) {\n            v = caster( v );\n            // If there is a special getter, any set will fire.\n            // Otherwise, we fire only if the value has changed.\n            if( hasSpecialGetter || obj[ID][att].value !== v) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    } else {\n        setter = function(v) {\n            // If there is a special getter, any set will fire.\n            // Otherwise, we fire only if the value has changed.\n            if( hasSpecialGetter || obj[ID][att].value !== v ) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    }\n    var getter = val;\n    if (!hasSpecialGetter) {\n        // Default getter.\n        getter = function() { return obj[ID][att].value; };\n    }\n    Object.defineProperty( obj, att, {\n        get: getter,\n        set: setter,\n        configurable: false,\n        enumerable: true\n    });\n    return exports.bind.bind(exports, obj, att);\n};\n\n/**\n * @export function fire\n *\n * Set a new value and fire the event even if the value has not changed.\n */\nexports.fire = function( obj, att, val ) {\n    var currentValue = obj[att];\n    if( typeof val === 'undefined' ) val = currentValue;\n\n    obj[ID][att].value = val;\n    obj[ID][att].event.fire( obj[att], obj, att );\n};\n\n/**\n * @export function set\n *\n * Set a new value without firing any event.\n */\nexports.set = function( obj, att, val ) {\n    if( typeof obj[ID] === 'undefined' ) obj[ID] = {};\n    if( typeof obj[ID][att] === 'undefined' ) obj[ID][att] = {};\n    obj[ID][att].value = val;\n};\n\n/**\n * @export function get\n *\n * Get a value without firing any event.\n */\nexports.get = function( obj, att ) {\n    if( typeof obj[ID] === 'undefined' ) return undefined;\n    if( typeof obj[ID][att] === 'undefined' ) return undefined;\n    return obj[ID][att].value;\n};\n\n/**\n * Create a property on which we can bind another property.\n * \n * @param {object} obj - Object to which we want to add a property.\n * @param {string} att - Name of the attribute of `obj`.\n * \n */\nexports.prop = propCast.bind( null, null );\n/**\n * @export @function propToggleClass\n * Create an enum attribute which toggles a CSS class when assigned.\n *\n * @param {array|object} values - If this is an array, we will convert\n * it  into an  object.  For instance `[\"show\",  \"hide\"]` will  become\n * `{show: \"show\", hide: \"hide\"}`.\n */\nexports.propToggleClass = function( target, attribute, values, prefix ) {\n    if( typeof prefix !== 'string' ) prefix = '';\n    var convertedValues = {};\n    if (typeof values === 'string') {\n        convertedValues[values] = values;\n    }\n    else if (Array.isArray(values)) {\n        values.forEach(function (itm) {\n            convertedValues[itm] = itm;\n        });\n    }\n    else {\n        convertedValues = values;\n    }\n    propCast( null, target, attribute )(function(v) {\n        var key, val;\n        for( key in convertedValues ) {\n            val = convertedValues[key];\n            if (key == v) {\n                $.addClass( target.element, prefix + val);\n            } else {\n                $.removeClass( target.element, prefix + val);\n            }\n        }\n    });\n};\n/**\n * @export @function propAddClass\n * Create a boolean attribute that toggle a CSS class on the `element` attribute of `target`.\n * If the value id `true`, `className` is added.\n * @example\n * DB.propAddClass( this, 'wide', 'fullscreen' );\n * DB.propAddClass( this, 'wide' );\n */\nexports.propAddClass = function( target, attribute, className ) {\n    if( typeof className === 'undefined' ) className = attribute;\n    propCast( converters.castBoolean, target, attribute )(function(v) {\n        if (v) $.addClass( target.element, className );\n        else $.removeClass( target.element, className );\n    });\n};\n/**\n * @export @function propAddClass\n * Create a boolean attribute that toggle a CSS class on the `element` attribute of `target`.\n * If the value id `true`, `className` is removed.\n * @example\n * DB.propRemoveClass( this, 'visible', 'hide' );\n */\nexports.propRemoveClass = function( target, attribute, className ) {\n    if( typeof className === 'undefined' ) className = attribute;\n    propCast( converters.castBoolean, target, attribute )(function(v) {\n        if (v) $.removeClass( target.element, className );\n        else $.addClass( target.element, className );\n    });\n};\nexports.propArray = propCast.bind( null, converters.castArray );\nexports.propBoolean = propCast.bind( null, converters.castBoolean );\nexports.propColor = propCast.bind( null, converters.castColor );\nexports.propDate = propCast.bind( null, converters.castDate );\nexports.propEnum = function( enumeration ) {\n    return propCast.bind( null, converters.castEnum( enumeration ) );\n};\nexports.propInteger = propCast.bind( null, converters.castInteger );\nexports.propRegexp = propCast.bind( null, converters.castRegexp );\nexports.propString = propCast.bind( null, converters.castString );\nexports.propStringArray = propCast.bind( null, converters.castStringArray );\nexports.propUnit = propCast.bind( null, converters.castUnit );\nexports.propValidator = propCast.bind( null, converters.castValidator );\n\nexports.bind = function( srcObj, srcAtt, dstObj, dstAtt, options ) {\n    if( typeof srcObj[ID] === 'undefined' || typeof srcObj[ID][srcAtt] === 'undefined' ) {\n        console.error( JSON.stringify( srcAtt ) + \" is not a bindable property!\", {\n            srcObj: srcObj,\n            srcAtt: srcAtt,\n            dstObj: dstObj,\n            dstAtt: dstAtt,\n            options: options\n        });\n        throw Error( JSON.stringify( srcAtt ) + \" is not a bindable property!\" );\n    }\n\n    if( typeof options === 'undefined' ) options = {};\n    if (options.value) {\n        options.converter = function() {\n            return options.value;\n        };\n    }\n    var lambda = typeof dstObj === 'function' ? dstObj : function(v, obj, att) {\n        dstObj[dstAtt] = typeof options.converter === 'function' ? options.converter(v) : v;\n    };\n    srcObj[ID][srcAtt].event.add( lambda );\n\n    return options;\n};\n\n\nexports.extend = function( def, ext, obj ) {\n    var out = JSON.parse( JSON.stringify( def ) );\n\n    var key, val;\n    for( key in ext ) {\n        if (key.charAt(0) == '$') continue;\n        val = ext[key];\n        if( typeof out[key] === 'undefined' ) {\n            console.error(\"[tfw.data-binding.extend] Undefined argument: `\" + key + \"`!\");\n        } else {\n            out[key] = val;\n        }\n    }\n\n    if (typeof obj !== 'undefined') {\n        for( key in ext ) {\n            if (key.charAt(0) != '$') continue;\n            Object.defineProperty( obj, key, {\n                value: ext[key],\n                writable: false,\n                configurable: false,\n                enumerable: false\n            });\n        }\n        // Setting values.\n        for( key in out ) {\n            if (key.charAt(0) == '$') continue;\n            obj[key] = out[key];\n        }\n    }\n\n    return out;\n};\n\n\nexports.converters = converters;\n\n\n  \nmodule.exports._ = _;\n});"],"names":["require","module","exports","propCast","caster","obj","att","val","hasSpecialGetter","ID","value","event","Listeners","setter","v","fire","getter","Object","defineProperty","get","set","configurable","enumerable","bind","_","X","D","arguments","en","intl","all","$","ParseUnit","parseUnit","converters","castArray","Array","isArray","undefined","castBoolean","trim","toLowerCase","castColor","castDate","Date","castEnum","enumeration","lowerCaseEnum","map","String","Math","floor","length","idx","indexOf","castInteger","parseInt","Number","NaN","castRegexp","RegExp","ex","console","error","castString","JSON","stringify","castStringArray","split","castUnit","parseFloat","isNaN","u","castValidator","rx","test","currentValue","prop","propToggleClass","target","attribute","values","prefix","convertedValues","forEach","itm","key","addClass","element","removeClass","propAddClass","className","propRemoveClass","propArray","propBoolean","propColor","propDate","propEnum","propInteger","propRegexp","propString","propStringArray","propUnit","propValidator","srcObj","srcAtt","dstObj","dstAtt","options","Error","converter","lambda","add","extend","def","ext","out","parse","charAt","writable"],"mappings":"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"},"dependencies":["mod/$","mod/polyfill.string","mod/dom","mod/tfw.css","mod/tfw.listeners"]}