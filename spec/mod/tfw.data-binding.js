require("tfw.data-binding",function(n,e,t){function r(n,e,r,o){var i="function"==typeof o;"undefined"==typeof e[f]&&(e[f]={}),e[f][r]={value:o,event:new a};var u;u="function"==typeof n?function(t){t=n(t),(i||e[f][r].value!==t)&&(e[f][r].value=t,e[f][r].event.fire(t,e,r))}:function(n){(i||e[f][r].value!==n)&&(e[f][r].value=n,e[f][r].event.fire(n,e,r))};var l=o;return i||(l=function(){return e[f][r].value}),Object.defineProperty(e,r,{get:l,set:u,configurable:!1,enumerable:!0}),t.bind.bind(t,e,r)}var o=function(){function e(){return r(t,arguments)}var t={en:{}},r=n("$").intl;return e.all=t,e}();n("polyfill.string");var i=n("dom"),u=n("tfw.css").parseUnit,a=n("tfw.listeners"),f="_tfw.data-binding_",l={castArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:[n]},castBoolean:function(n){if("boolean"==typeof n)return n;if("string"==typeof n){if(n=n.trim().toLowerCase(),"1"==n||"true"==n||"yes"==n)return!0;if("0"==n||"false"==n||"no"==n)return!1}return"number"==typeof n?!!n:null},castColor:function(n){return""+n},castDate:function(n){return"number"==typeof n||"string"==typeof n?new Date(n):n instanceof Date?n:new Date},castEnum:function(n){var e=n.map(String.toLowerCase);return function(t){if("number"==typeof t)return n[Math.floor(t)%n.length];if("string"!=typeof t)return n[0];var r=e.indexOf(t.trim().toLowerCase());return r<0&&(r=0),n[r]}},castInteger:function(n){return"number"==typeof n?Math.floor(n):"boolean"==typeof n?n?1:0:"string"==typeof n?parseInt(n):Number.NaN},castRegexp:function(n){if(n instanceof RegExp)return n;if("string"==typeof n&&0!=n.trim().length)try{return new RegExp(n)}catch(e){console.error("[castRegexp] /"+n+"/ ",e)}return null},castString:function(n){return"string"==typeof n?n:void 0===n||null===n?"":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:"string"==typeof n?n.split(",").map(String.trim):[JSON.stringify(n)]},castUnit:function(n){return n?"undefined"!=typeof n.v?(n.v=parseFloat(n.v),isNaN(n.v)?{v:0,u:"px"}:("string"!=typeof n.u&&(n.u="px"),{v:n.v,u:n.u})):"number"==typeof n?{v:n,u:"px"}:"string"!=typeof n?{v:0,u:"px"}:u(""+n):{v:0,u:"px"}},castValidator:function(n){if("function"==typeof n)return n;if("boolean"==typeof n)return function(){return n};if("string"==typeof n&&0!=n.trim().length)try{var e=new RegExp(n);return e.test.bind(e)}catch(e){console.error("[castValidator] /"+n+"/ ",e)}return function(){return null}}};t.fire=function(n,e,t){var r=n[e];"undefined"==typeof t&&(t=r),n[f][e].value=t,n[f][e].event.fire(n[e],n,e)},t.set=function(n,e,t){"undefined"==typeof n[f]&&(n[f]={}),"undefined"==typeof n[f][e]&&(n[f][e]={}),n[f][e].value=t},t.get=function(n,e){if("undefined"!=typeof n[f]&&"undefined"!=typeof n[f][e])return n[f][e].value},t.prop=r.bind(null,null),t.propToggleClass=function(n,e,t,o){"string"!=typeof o&&(o="");var u={};"string"==typeof t?u[t]=t:Array.isArray(t)?t.forEach(function(n){u[n]=n}):u=t,r(null,n,e)(function(e){var t,r;for(t in u)r=u[t],t==e?i.addClass(n.element,o+r):i.removeClass(n.element,o+r)})},t.propAddClass=function(n,e,t){"undefined"==typeof t&&(t=e),r(l.castBoolean,n,e)(function(e){e?i.addClass(n.element,t):i.removeClass(n.element,t)})},t.propRemoveClass=function(n,e,t){"undefined"==typeof t&&(t=e),r(l.castBoolean,n,e)(function(e){e?i.removeClass(n.element,t):i.addClass(n.element,t)})},t.propArray=r.bind(null,l.castArray),t.propBoolean=r.bind(null,l.castBoolean),t.propColor=r.bind(null,l.castColor),t.propDate=r.bind(null,l.castDate),t.propEnum=function(n){return r.bind(null,l.castEnum(n))},t.propInteger=r.bind(null,l.castInteger),t.propRegexp=r.bind(null,l.castRegexp),t.propString=r.bind(null,l.castString),t.propStringArray=r.bind(null,l.castStringArray),t.propUnit=r.bind(null,l.castUnit),t.propValidator=r.bind(null,l.castValidator),t.bind=function(n,e,t,r,o){if("undefined"==typeof n[f]||"undefined"==typeof n[f][e])throw console.error(e+" is not a bindable property of ",n),Error(e+" is not a bindable property!");"undefined"==typeof o&&(o={}),o.value&&(o.converter=function(){return o.value});var i="function"==typeof t?t:function(n,e,i){t[r]="function"==typeof o.converter?o.converter(n):n};return n[f][e].event.add(i),o},t.extend=function(n,e,t){var r,o,i=JSON.parse(JSON.stringify(n));for(r in e)"$"!=r.charAt(0)&&(o=e[r],"undefined"==typeof i[r]?console.error("[tfw.data-binding.extend] Undefined argument: `"+r+"`!"):i[r]=o);if("undefined"!=typeof t){for(r in e)"$"==r.charAt(0)&&Object.defineProperty(t,r,{value:e[r],writable:!1,configurable:!1,enumerable:!1});for(r in i)"$"!=r.charAt(0)&&(t[r]=i[r])}return i},t.converters=l,e.exports._=o});
//# sourceMappingURL=tfw.data-binding.js.map